function e(e,t,a,i){Object.defineProperty(e,t,{get:a,set:i,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function a(e){return e&&e.__esModule?e.default:e}var i={},n={},r=t.parcelRequiref3bd;null==r&&((r=function(e){if(e in i)return i[e].exports;if(e in n){var t=n[e];delete n[e];var a={id:e,exports:{}};return i[e]=a,t.call(a.exports,a,a.exports),a.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){n[e]=t},t.parcelRequiref3bd=r),r.register("iiTmG",(function(t,a){var i,n;e(t.exports,"register",(function(){return i}),(function(e){return i=e})),e(t.exports,"resolve",(function(){return n}),(function(e){return n=e}));var r={};i=function(e){for(var t=Object.keys(e),a=0;a<t.length;a++)r[t[a]]=e[t[a]]},n=function(e){var t=r[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),r("iiTmG").register(JSON.parse('{"l7cMy":"index.479d228a.js","kZHbo":"multimedia_button_click_028.29e3ad99.mp3","3PJPt":"multimedia_button_click_013.5edb7d8c.mp3","Yi3Lz":"lesser_vibes_HTIS_Power_Down_01_029.b06a212c.mp3","4duB3":"multimedia_button_click_007.660135e0.mp3","1xZo6":"zapsplat_multimedia_game_sound_positive_action_tone_022_25081.c0674bc9.mp3","iFS0B":"zapsplat_multimedia_alert_double_click_66567.2e2b71a3.mp3","izc6E":"zapsplat_multimedia_game_sound_pause_music_loop_soft_chime_calm_70247 - short.a95bb690.mp3","gWyYg":"zapsplat_multimedia_alert_notification_ui_ping_chime_mallet_like_error_002_65663.0ef29556.mp3","3Faln":"multimedia_rollover_038.7753539a.mp3","1y5kp":"zapsplat_multimedia_alert_prompt_ui_mallet_simple_hit_notification_two_tone_70218.f8a00d3d.mp3","f26EZ":"zapsplat_multimedia_alert_short_bold_musical_warm_attention_warning_73077.e7b31c0c.mp3","4YilU":"zapsplat_magic_wand_zap_spark_power_004_12554.5dcd22aa.mp3","agCuC":"service-worker.js","j2WcK":"index.b695e339.css"}'));var o={},s=[],l=e=>e,c=s.map,d=Array.isArray,u="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:setTimeout,g=e=>{var t="";if("string"==typeof e)return e;if(d(e))for(var a,i=0;i<e.length;i++)(a=g(e[i]))&&(t+=(t&&" ")+a);else for(var i in e)e[i]&&(t+=(t&&" ")+i);return t},m=(e,t)=>{for(var a in{...e,...t})if("function"==typeof(d(e[a])?e[a][0]:e[a]))t[a]=e[a];else if(e[a]!==t[a])return!0},h=e=>null==e?e:e.key,p=(e,t,a,i,n,r)=>{if("key"===t);else if("style"===t)for(var o in{...a,...i})a=null==i||null==i[o]?"":i[o],"-"===o[0]?e[t].setProperty(o,a):e[t][o]=a;else"o"===t[0]&&"n"===t[1]?((e.events||(e.events={}))[t=t.slice(2)]=i)?a||e.addEventListener(t,n):e.removeEventListener(t,n):!r&&"list"!==t&&"form"!==t&&t in e?e[t]=null==i?"":i:null==i||!1===i||"class"===t&&!(i=g(i))?e.removeAttribute(t):e.setAttribute(t,i)},w=(e,t,a)=>{var i=e.props,n=3===e.type?document.createTextNode(e.tag):(a=a||"svg"===e.tag)?document.createElementNS("http://www.w3.org/2000/svg",e.tag,{is:i.is}):document.createElement(e.tag,{is:i.is});for(var r in i)p(n,r,null,i[r],t,a);for(var o=0;o<e.children.length;o++)n.appendChild(w(e.children[o]=y(e.children[o]),t,a));return e.node=n},f=(e,t,a,i,n,r)=>{if(a===i);else if(null!=a&&3===a.type&&3===i.type)a.tag!==i.tag&&(t.nodeValue=i.tag);else if(null==a||a.tag!==i.tag)t=e.insertBefore(w(i=y(i),n,r),t),null!=a&&e.removeChild(a.node);else{var o,s,l,c,d=a.props,u=i.props,g=a.children,m=i.children,b=0,v=0,M=g.length-1,S=m.length-1;for(var C in r=r||"svg"===i.tag,{...d,...u})("value"===C||"selected"===C||"checked"===C?t[C]:d[C])!==u[C]&&p(t,C,d[C],u[C],n,r);for(;v<=S&&b<=M&&null!=(l=h(g[b]))&&l===h(m[v]);)f(t,g[b].node,g[b],m[v]=y(m[v++],g[b++]),n,r);for(;v<=S&&b<=M&&null!=(l=h(g[M]))&&l===h(m[S]);)f(t,g[M].node,g[M],m[S]=y(m[S--],g[M--]),n,r);if(b>M)for(;v<=S;)t.insertBefore(w(m[v]=y(m[v++]),n,r),(s=g[b])&&s.node);else if(v>S)for(;b<=M;)t.removeChild(g[b++].node);else{var k={},I={};for(C=b;C<=M;C++)null!=(l=g[C].key)&&(k[l]=g[C]);for(;v<=S;)l=h(s=g[b]),c=h(m[v]=y(m[v],s)),I[l]||null!=c&&c===h(g[b+1])?(null==l&&t.removeChild(s.node),b++):null==c||1===a.type?(null==l&&(f(t,s&&s.node,s,m[v],n,r),v++),b++):(l===c?(f(t,s.node,s,m[v],n,r),I[c]=!0,b++):null!=(o=k[c])?(f(t,t.insertBefore(o.node,s&&s.node),o,m[v],n,r),I[c]=!0):f(t,s&&s.node,null,m[v],n,r),v++);for(;b<=M;)null==h(s=g[b++])&&t.removeChild(s.node);for(var C in k)null==I[C]&&t.removeChild(k[C].node)}}return i.node=t},y=(e,t)=>!0!==e&&!1!==e&&e?"function"==typeof e.tag?((!t||null==t.memo||((e,t)=>{for(var a in e)if(e[a]!==t[a])return!0;for(var a in t)if(e[a]!==t[a])return!0})(t.memo,e.memo))&&((t=e.tag(e.memo)).memo=e.memo),t):e:S(""),b=e=>3===e.nodeType?S(e.nodeValue,e):v(e.nodeName.toLowerCase(),o,c.call(e.childNodes,b),1,e),v=(e,t,a,i,n)=>({tag:e,props:t,key:t.key,children:a,type:i,node:n}),M=(e,t)=>({tag:e,memo:t}),S=(e,t)=>v(e,o,s,3,t),C=(e,t,a=s)=>v(e,t,d(a)?a:[a]);const k=(e,t)=>Math.ceil(e/100*t),I=(e,t)=>e+t,A=e=>e.reduce(I,0),B=(e,t,a)=>(e-t)/(a-t),T=(e,t,a)=>Math.floor(e*(a-t+1)+t),N=(e,t=2)=>{const a=Math.floor(e).toString(),i=a.slice(0,t).padEnd(a.length,"0"),n=+i;return"5"===i[t-1]&&a.length%2!=0?n-1:n},P=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:2,notation:"compact",compactDisplay:"short"}),x=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumSignificantDigits:1,maximumSignificantDigits:3,notation:"compact",compactDisplay:"short"}),W=new Intl.NumberFormat("en-US",{style:"percent",maximumFractionDigits:0}),L=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}),R=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:5,maximumFractionDigits:5}),F=new Intl.NumberFormat("en-US",{style:"decimal",maximumFractionDigits:2}),H=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:1,maximumFractionDigits:1}),D=new Intl.NumberFormat("en-US",{style:"decimal",maximumFractionDigits:0}),$=new Intl.NumberFormat("en-US",{style:"decimal",maximumFractionDigits:2,notation:"compact",compactDisplay:"short"}),_=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2,notation:"compact",compactDisplay:"short"}),z=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:2,notation:"compact",compactDisplay:"short"}),E=new Intl.NumberFormat("en-US",{style:"decimal",maximumFractionDigits:0,notation:"compact",compactDisplay:"short"}),O=new Intl.DateTimeFormat("en-US",{minute:"2-digit",second:"2-digit",fractionalSecondDigits:3}),U=e=>P.format(e),q=e=>W.format(e),G=e=>L.format(e),V=e=>R.format(e),j=e=>F.format(e),Q=e=>H.format(e),J=e=>D.format(e),K=e=>$.format(e),Y=e=>_.format(e),Z=e=>z.format(e),X=(e,t)=>void 0===t?e:`${e} (${t})`;class ee{get(e,...t){return e===this.source1||(this.source1=e,this.calculated=this.calcFn(e,...t)),this.calculated}getFor2(e,t,...a){return e===this.source1&&t===this.source2||(this.source1=e,this.source2=t,this.calculated=this.calcFn(e,t,...a)),this.calculated}constructor(e){this.calcFn=e,this.source1=null,this.source2=null,this.calculated=null}}const te=new Map,ae="message",ie="news",ne="mesh",re=(e,t,a)=>{if(te.has(e))throw new Error(`Duplicate log entry id ${e}`);const i={id:e,text:t,type:a};return te.set(e,i),i},oe=(e,t)=>re(e,t,ae),se=(e,t)=>re(e,t,ie),le=(e,t)=>re(e,t,ne),ce=({log:e},t)=>{if(void 0===t)return;const a=Array.isArray(t)?t:[t],i=e.slice(0,15-a.length);return{log:a.map((e=>e.id)).concat(i)}},de=()=>[...te.values()],ue=new ee((e=>{const t=new Map;return e.map((e=>{const{text:a,type:i}=te.get(e);var n;const r=(null!==(n=t.get(e))&&void 0!==n?n:0)+1;return t.set(e,r),{uid:`${e}-${r}`,message:a,type:i}}))}));const ge=new class{refreshAsNeeded(e){this.innerArrayRef!==e&&(this.innerSet.clear(),e.forEach((e=>this.innerSet.add(e))),this.innerArrayRef=e)}has(e,t){return this.refreshAsNeeded(e),this.innerSet.has(t)}hasAll(e,t){return this.refreshAsNeeded(e),t.every((e=>this.innerSet.has(e)))}include(e,...t){return[...new Set([...e,...t])]}constructor(){this.innerSet=new Set,this.innerArrayRef=null}},me={manufacture:100,notions:101,autoMaker:102,vogue:104,bribes:105,trendsVisible:106,trendsEnabled:107,firstCustomer:108,war:109,warStarted:110,nylonTransfer:111,fabQuantitySwitchNewLevel:112,hatDrop:113,inititalGridDestroyed:114,nylonBuyEarly:115},he={wigs1:200,wigCap1:201,power:202,marketing:203,nylonWigs:204,fabricator:205,wiglets:206,bulkBuy1:207,bulkBuy2:208,packaging:209,fabflow:210,siliconeWigs:211,wigs2:212,wigs3:213,wigs4:214,wigCap2:215,wigCap3:216,wigCap4:217,nationwide:218,operationalEfficiency:219,bulkBuy3:220,bulkBuy4:221,research:222},pe={newMarkets:300,international:301,franchise:302,autoSilicon:303,microCompute:304,mesh:305,wigMakerSwitcher:306,algaeIncubator:307,smartWigs:308,distributionNetwork:309,drone:310,storage:311,multiLayered:312,microBio:313,hyperFab:315,powerChaining:316,voidPower:317,campaignManager:318,capitalize:319,thinair:323,subzero:320,loyaltyByDesign:321,droneSquadrons:322,autoInstall:314,demandLinking:324},we={magazines:400,socialMedia:401,wearUpDown:402,nylon:403,nylonUltimateColour:404,noMoreBedHead:405,hairLiceScare:406,socialInfluencers:407,politicalInfluencers:408,brandAmbassadors:409,silicone:410,shine:411,allSeasons:412,coiffeur:413,dogs:414,algae:415,noHairToHide:416,dominance:417,brandLoyalty:418,easyCare:419,everyHead:420,undermine:421,salmon:422,goldenWig:423,basketball:424,moustacheShaming:425,wigMania:426,game:427,politicalAcumen:428,smart:429,hairToday:430},fe={heist1:500,meshMode:501,bioResearch:502,hairStocks:503,disruptShampoo:504,eradicateMilliners:505,transferDataCenter:506,wipeAwayCompetitors:507,doctorWaterSupply:508,controlMedia:509};(()=>{const e=Object.values(we).concat(Object.values(he)).concat(Object.values(me)).concat(Object.values(pe)).concat(Object.values(fe));if(new Set(e).size!==e.length)throw new Error("Milestone IDs are not unique")})();const ye=1e5,be=5e5,ve=1e6,Me=2e6,Se=5e6,Ce=8e6,ke=1e7,Ie=2e7,Ae=3e7,Be=4e7,Te=5e7,Ne=1e8,Pe=2e8,xe=4e8,We=5e8,Le=8e8,Re=1e9,Fe=2e9,He=5e9,De=6e9,$e=7e9,_e=8e9,ze=1e11,Ee=2e11,Oe=0,Ue=1,qe=2,Ge=4,Ve=(e,t)=>(e&t)===t;var je=()=>Oe,Qe=()=>Ue|qe,Je=e=>Ve(e,Ue),Ke=e=>Ve(e,Ge),Ye=e=>Ue|(Ve(e,Ge)?qe:Ge);const Ze=e=>Math.min(130,Math.floor(3*(6*e^e))),Xe=e=>e<=10?Math.floor(Math.log(e+.3)*Math.log((e+.3)**6)*90):Math.floor(Math.exp((e-2)/10)*(2800*(e-2^5)));var et,tt,at=[{id:we.magazines,title:"Print advertising",milestones:[he.marketing],allowCash:25},{id:we.socialMedia,title:"Web shop with social media",milestones:[he.marketing],allowCash:250,log:oe("2a","A small amount of discourse might improve things")},{id:we.wearUpDown,title:"Wear it up, wear it down; two styles in one",milestones:[we.socialMedia],allowCash:410},{id:we.nylon,title:"Nylon-blend, the wig of choice",milestones:[we.socialMedia,he.nylonWigs],trigger:({wigsMade:e})=>e>=125,allowCash:1400},{id:we.nylonUltimateColour,title:"Red, yellow, green: it’s the party wig",milestones:[we.nylon],allowCash:2100,log:oe("2b","So much change; so much lost")},{id:we.socialInfluencers,title:"Social media influencers",milestones:[we.socialMedia,me.vogue,he.fabricator],log:se("2c","Milliner conference discusses wig wearing upswing")},{id:we.noMoreBedHead,title:"No more bed head",milestones:[we.nylonUltimateColour]},{id:we.hairLiceScare,title:"Hair lice scare",trigger:({wigsMade:e})=>e>=2e3,milestones:[we.noMoreBedHead]},{id:we.politicalInfluencers,title:"Political influencers",milestones:[we.socialInfluencers],trigger:({wigsMade:e,brand:t})=>e>=4850&&t>=25e3,brand:2e4},{id:we.silicone,title:"Silicone wigs slide like silk",milestones:[he.siliconeWigs]},{id:we.brandAmbassadors,title:"Brand ambassadors",milestones:[we.politicalInfluencers],trigger:({wigsMade:e,brand:t})=>e>=1e4&&t>=6e4,allowCash:54e3,brand:3e4},{id:we.shine,title:"Photo-realistic shine",milestones:[we.silicone,we.brandAmbassadors],brand:35e3,log:se("2f","Silicone wigs rated “outstanding”")},{id:we.allSeasons,title:"A wig for all seasons",milestones:[we.shine,he.research],trigger:({wigsMade:e,brand:t,fabricators:a})=>e>=7e4&&t>=5e5&&a>=50,brand:4e4},{id:we.coiffeur,title:"Shun the coiffeur",milestones:[we.allSeasons],trigger:({wigsMade:e,brand:t})=>e>=1e5&&t>=75e4,brand:5e4},{id:we.dogs,title:"wigs 4 dogs",milestones:[we.allSeasons,pe.newMarkets],trigger:({wigsMade:e})=>e>=115e3},{id:we.easyCare,title:"Easy care (fake) hair",milestones:[we.dogs,pe.international]},{id:we.game,title:"Create game with addictive qualities",milestones:[we.dogs,we.coiffeur,pe.international,pe.microCompute],trigger:({brand:e})=>e>=12e5},{id:we.moustacheShaming,title:"Moustache shaming",milestones:[we.game],trigger:({brand:e})=>e>=2e6},{id:we.undermine,title:"Undermine the market",milestones:[we.moustacheShaming],log:se("2d","Wig market in turmoil as newcomer cleans up")},{id:we.algae,title:"Go natural with plant-based wigs",milestones:[pe.algaeIncubator]},{id:we.noHairToHide,title:"No hair to hide",milestones:[we.undermine,we.easyCare],trigger:({autoCampaign:e})=>Je(e),log:se("2h","Wigs are red hot")},{id:we.basketball,title:"Wigs for basketball players joint venture",milestones:[we.noHairToHide,pe.voidPower],trigger:({brand:e})=>e>=38e6,log:se("2e","Wig wearing basketball players are a slam dunk")},{id:we.salmon,title:"Salon-like not salmon-like",milestones:[we.basketball,pe.drone],brand:Ie},{id:we.smart,title:"Be smart with AI & I",milestones:[pe.smartWigs]},{id:we.brandLoyalty,title:"Brand loyalty scheme",milestones:[we.salmon,we.smart,pe.drone],trigger:({brand:e})=>e>=Ne+Ie,brand:Ie},{id:we.politicalAcumen,title:"Skew political acumen",milestones:[we.brandLoyalty],trigger:({brand:e})=>e>=Pe,brand:Ne},{id:we.goldenWig,title:"The golden wig prize",milestones:[we.brandLoyalty],trigger:({brand:e})=>e>=We,brand:Ne},{id:we.hairToday,title:"Hair today, gone tomorrow",milestones:[fe.disruptShampoo],trigger:({meshNodes:e})=>e>=xe},{id:we.dominance,title:"Market dominance",milestones:[we.politicalAcumen,we.goldenWig],trigger:({meshNodes:e})=>e>=Re},{id:we.wigMania,title:"WigMania",milestones:[we.dominance],trigger:({meshNodes:e})=>e>=Fe,log:se("2g","Wigs more popular than a paperclip")},{id:we.everyHead,title:"A wig on every head",milestones:[we.wigMania],trigger:({meshNodes:e})=>e>=3e9,duration:60}].map(((e,t)=>{return{...e,allowCash:N(null!==(et=e.allowCash)&&void 0!==et?et:(a=t+1,100*Math.floor(15*a**(2.6+a/10)/100))),duration:1e3*(null!==(Us=e.duration)&&void 0!==Us?Us:Ze(t+1)),brand:null!==(tt=e.brand)&&void 0!==tt?tt:Xe(t+1)};var a})).map((e=>({...e,cost:U(e.allowCash)})));const it="button",nt="toggle",rt="lowPower",ot="tabChange",st="titlesNav",lt="meshIteration",ct="researchComplete",dt="theEnd",ut="incident",gt="pause",mt="start",ht="computeZero",pt="meshMode";let wt,ft,yt=[];const bt=(e,t)=>{yt.push(t)},vt=e=>[bt,e],Mt=0,St=2,Ct=1,kt=4,It=8,At=16,Bt=(e,t)=>e|t,Tt=(e,...t)=>t.reduce(Bt,e),Nt=(e,t)=>(e&t)===t,Pt=(e,t)=>[{...e,navSelected:t,nav:Tt(e.nav,Ct)},vt(ot)],xt=(e,{action:t,payload:a})=>{e([t,a])},Wt=(e,t)=>{e(t)},Lt=(e,t,a)=>i=>e(i,a)?((e,t)=>void 0===t?e:[e,t])(t,a):i,Rt=e=>0===e.boostRemaining&&!e.lowPower,Ft=e=>e.boostRemaining>0,Ht=e=>[{...e,boostRemaining:8e3},vt(it)],Dt=()=>Lt(Rt,Ht),$t={boostRemaining:0},_t=e=>({...e,...$t}),zt=0,Et=1,Ot=2,Ut=3,qt=4,Gt=["Grid","Grid","Solar","Wind","Void"],Vt=[1e3,5e3,4e3,4500,1/0],jt=[0,3200,2800,2650,0],Qt=[0,223,85,160,0],Jt=e=>Gt[e],Kt=(e,t)=>{const a=e.filter((e=>e===t)).length+1,i=Qt[t]*a,n=(e.length-1)**3;return N(jt[t]+n*i)},Yt=Array.from({length:5},(()=>new ee(Kt))),Zt=({powerSupply:e,cash:t},a)=>e.length<100&&t>=Yt[a].get(e,a),Xt=({achieved:e},t)=>(t===Ot||t===Ut)&&ge.has(e,pe.powerChaining)?4:1,ea=(e,t)=>Vt[t]*Xt(e,t),ta=(e,t,a)=>{if(e.length>=100)return"(maxed)";const i=`+${j(ea(a,t))} ${Jt(t)}`,n=U(Yt[t].get(e,t));return X(i,n)},aa=Array.from({length:5},(()=>new ee(ta))),ia=(e,t)=>aa[t].get(e.powerSupply,t,e),na=new ee(((e,t)=>A(e.map((e=>ea(t,e)))))),ra=e=>na.get(e.powerSupply,e),oa=new ee(((e,t)=>j(ra(t)))),sa=e=>oa.get(e.powerSupply,e),la=new ee((e=>j(e))),ca=({powerDemand:e})=>la.get(e),da=oe("4e","Normal power levels resumed"),ua=(e,t)=>{if(0===t)return;if(!e.lowPower)return;return ra(e)+t<e.powerDemand?void 0:{...ce(e,da),lowPower:!1}},ga=(e,t)=>[{...e,powerSupply:[...e.powerSupply,t],cash:e.cash-Yt[t].get(e.powerSupply,t),...ua(e,ea(e,t))},vt(it)],ma=()=>Lt(Zt,ga,Et),ha=()=>Lt(Zt,ga,Ot),pa=()=>Lt(Zt,ga,Ut),wa=oe("4d","Insufficient power"),fa=e=>!e.lowPower&&(e=>ra(e)<e.powerDemand)(e)?[{...e,...$t,lowPower:!0,...ce(e,wa)},vt(rt)]:e;var ya=()=>[Wt,fa];const ba=e=>e>=1e4,va=e=>(t,a)=>{if(1===a)return e(t);let i=t;for(let n=0;n<a;n+=1)i+=e(t+a);return i},Ma=new ee(va((e=>N(19.2*(e-1)*(e<300?100:e))))),Sa=e=>300+5*e,Ca=new ee(va(Sa)),ka=(e,t)=>va(Sa)(e-t,t),Ia=e=>!ba(e.fabricators)&&!e.lowPower&&e.cash>=Ma.getFor2(e.fabricators,e.fabricatorActionQuantity),Aa=new ee(((e,t)=>{const a=`+${t}`,i=`${U(Ma.getFor2(e,t))}, ${j(Ca.getFor2(e,t))} power`;return X(a,i)})),Ba=e=>ba(e.fabricators)?"(maxed)":Aa.getFor2(e.fabricators,e.fabricatorActionQuantity),Ta=e=>[{...e,fabricators:e.fabricators+e.fabricatorActionQuantity,fabricatorsUnallocated:e.fabricatorsUnallocated+e.fabricatorActionQuantity,cash:e.cash-Ma.getFor2(e.fabricators,e.fabricatorActionQuantity),powerDemand:e.powerDemand+Ca.getFor2(e.fabricators,e.fabricatorActionQuantity)},ya(),vt(it)],Na=()=>Lt(Ia,Ta),Pa=(e,t)=>0===e.fabricatorsUnallocated?e:[{...e,fabricating:e.fabricating.map(((a,i)=>i===t?{...a,allocated:a.allocated+Math.min(e.fabricatorActionQuantity,e.fabricatorsUnallocated)}:a)),fabricatorsUnallocated:e.fabricatorsUnallocated-Math.min(e.fabricatorActionQuantity,e.fabricatorsUnallocated)},vt(it)],xa=(e,t)=>0===e.fabricating[t].allocated?e:[{...e,fabricating:e.fabricating.map(((a,i)=>i===t?{...a,allocated:a.allocated-Math.min(e.fabricatorActionQuantity,a.allocated)}:a)),fabricatorsUnallocated:e.fabricatorsUnallocated+Math.min(e.fabricatorActionQuantity,e.fabricating[t].allocated)},vt(it)],Wa=(e,t)=>1===t?10:e<400||50===t?1:50,La=(e,t)=>[{...e,fabricatorActionQuantity:t},vt(it)],Ra=e=>({...e,powerDemand:150,achieved:ge.include(e.achieved,me.autoMaker)}),Fa=(e,t)=>({...e,wigMakerLevel:t}),Ha=(e,t)=>({...e,wigCapMakerLevel:t}),Da=(e,t)=>({...e,buyLevel:t}),$a=(e,t)=>({...e,brandMultiplier:e.brandMultiplier+t}),_a=(e,t)=>({...e,fabricatorMultiplier:e.fabricatorMultiplier+t}),za=({cash:e,brand:t,micro:a,power:i,free:n})=>{const r=[];if(n)return" ";if(void 0!==e&&r.push(U(e)),void 0!==t&&r.push((e=>`≥${K(e)} brand`)(t)),void 0!==a&&r.push((e=>`${j(e)} micro`)(a)),void 0!==i&&r.push((e=>`${j(e)} power`)(i)),0===r.length)throw new Error("Bad cost input");return r.join(", ")},Ea=(e,t,a)=>{const i=Math.min(e,a);return{micro:e-i,microBio:t-(a-i)}},Oa=({cash:e,micro:t,microBio:a},{cash:i=0,micro:n=0})=>({cash:e-i,...Ea(t,a,n)}),Ua=({cash:e,brand:t,micro:a,microBio:i},{cash:n=0,brand:r=0,micro:o=0})=>e>=n&&t>=r&&a+i>=o,qa=2e3;var Ga=[{id:he.marketing,title:"Market forces",description:"Begin actively marketing wigs",duration:10,milestones:[me.notions],allowCost:{cash:110},action:e=>({...e,nav:Tt(e.nav,kt)}),log:oe("1a","Marketing may prove to be the catalyst of ambitious desires")},{id:he.wigCap1,title:"Wig Cap Spinner",description:"Purchase machine for making wig caps",duration:20,milestones:[me.notions],trigger:({wigsMade:e})=>e>=15,allowCost:{cash:135},action:Ra,log:oe("1b","Nylon wig caps are the basis of all good wigs")},{id:he.wigs1,title:"Wig Maker 100",description:"Slow but dependable wig making machinery",duration:5,milestones:[he.marketing],trigger:({wigsMade:e})=>e>=25,allowCost:{cash:45},action:Ra,log:oe("1c","Contraptions to ease the burden")},{id:he.nylonWigs,title:"Nylon-blend wigs",description:"Mix hair and nylon to create a lower-cost wig",duration:80,milestones:[he.wigCap1,we.socialMedia],trigger:({wigsMade:e})=>e>=80,allowCost:{cash:220},log:oe("1d","Nylon wigs: not glamorous but good value")},{id:he.power,title:"Flexible power supply",description:"Better control over power supply and distribution",duration:130,milestones:[he.nylonWigs],trigger:({wigsMade:e})=>e>=125,allowCost:{cash:650},log:oe("1u","Power supply management available")},{id:he.wigs2,title:"Wig Maker 200",description:"A reasonable wig maker",duration:10,milestones:[he.nylonWigs],trigger:({wigsMade:e})=>e>=100,allowCost:{cash:300},action:[Fa,1],log:oe("1e","Wig maker upgraded")},{id:he.wigs3,title:"Wig Maker 500",description:"Better model boasting 50% faster running speed",duration:10,milestones:[he.wigs2],trigger:({wigsMade:e})=>e>=130,allowCost:{cash:490},action:[Fa,2],log:oe("1f","Wig maker upgraded")},{id:he.wigs4,title:"Wig Maker 1000",description:"Latest model with twice the performance",duration:10,milestones:[he.wigs3,he.power],trigger:({wigsMade:e})=>e>=300,allowCost:{cash:1e3},action:[Fa,3],log:oe("1g","Wig maker upgraded")},{id:he.wigCap2,title:"Wig Cap Feeder Module v2",description:"200% wig cap manufacturing",duration:20,milestones:[he.wigCap1,he.power],allowCost:{cash:95},action:[Ha,1],log:oe("1j","Wig cap manufacturing improved")},{id:he.wigCap3,title:"Wig Cap Feeder Module v3",description:"Turbo charged wig cap spinning",duration:25,milestones:[he.wigCap2],allowCost:{cash:120},action:[Ha,2],log:oe("1n","Wig cap manufacturing improved")},{id:he.wigCap4,title:"Wig Cap Feeder Module v4",description:"Spinners to maximum",duration:35,milestones:[he.wigCap3,he.wigs4],trigger:({wigsMade:e})=>e>=360,allowCost:{cash:350},action:[Ha,3],log:oe("1q","Wig cap manufacturing improved")},{id:he.fabricator,title:"Fabrication facility",description:"Fully automated pattern-based manufacturing facility",duration:80,milestones:[he.wigs4,he.wigCap4,he.marketing],trigger:({wigsMade:e})=>e>=550,allowCost:{cash:1500},action:e=>({...e,powerDemand:600,fabricatorsUnallocated:2,fabricating:e.fabricating.map((e=>({...e,allocated:0,progress:0,rate:0})))}),log:oe("1h","Fabrication facility now online")},{id:he.wiglets,title:"Wiglet pattern",description:"Cheap and quick to make, wiglets are accessories for wigs",duration:30,milestones:[he.fabricator],allowCost:{cash:120},log:oe("1i","The perfect counterpart to an outstanding wig")},{id:he.bulkBuy1,title:"Multi-pack purchasing",description:"Better value by buying more",duration:45,milestones:[he.fabricator],trigger:({wigsMade:e})=>e>=200,allowCost:{brand:2e3},action:[Da,1],log:oe("1B","A better deal is struck")},{id:he.bulkBuy2,title:"Buying power",description:"Negotiate bulk-buy discounts",duration:60,milestones:[he.bulkBuy1],trigger:({wigsMade:e})=>e>=820,allowCost:{brand:4400},action:[Da,2],log:oe("1o","A better deal is struck")},{id:he.packaging,title:"Improved packaging",description:"More pleasant unboxing experience",duration:110,milestones:[he.bulkBuy1],trigger:({wigsMade:e})=>e>=1e3,allowCost:{cash:7500,brand:1e4},action:[$a,1],log:oe("1x","Wig boxes ignite social media; brand per sale increases")},{id:he.fabflow,title:"FabrFlow",description:"Optimize fabricator output efficiency",duration:135,milestones:[he.packaging],trigger:({wigsMade:e})=>e>=1300,allowCost:{cash:8500},action:[_a,.2],log:oe("1y","Fabricator performance improved")},{id:he.nationwide,title:"Nationwide presence",description:"Pop-up stands throughout the country",duration:120,milestones:[he.fabricator,me.vogue],trigger:({wigsMade:e})=>e>=1200,allowCost:{cash:2e4,brand:15e3},action:[$a,2],log:oe("1k","The reach into the nation extends (+3 per sale)")},{id:he.bulkBuy3,title:"Aggressive negotiations",description:"Ensure best price for raw materials",duration:60,milestones:[he.nationwide,he.fabflow],trigger:({wigsMade:e})=>e>=3200,allowCost:{cash:18e3},action:[Da,3],log:oe("1A","A even better deal is struck")},{id:he.bulkBuy4,title:"Extreme negotiations",description:"Dictate terms with suppliers",duration:60,milestones:[he.bulkBuy3],trigger:({wigsMade:e})=>e>=2e4,allowCost:{cash:35e3},action:[Da,4],log:oe("8h","A really good deal is struck")},{id:he.siliconeWigs,title:"Silicone wig pattern",description:"Charmingly realistic synthetic wigs",duration:190,milestones:[he.packaging,he.nationwide,he.bulkBuy3],trigger:({wigsMade:e})=>e>=4200,allowCost:{cash:38e3},log:oe("1p","Wigs made from silicone now available")},{id:he.operationalEfficiency,title:"Operational efficiency",description:"Much more performant fabricators",duration:135,milestones:[he.fabflow],trigger:({wigsMade:e})=>e>=4800,allowCost:{cash:26e3},action:[_a,.8],log:oe("1w","Fabricator performance improved")},{id:he.research,title:"Research center",description:"Finding new ways",duration:255,milestones:[he.siliconeWigs,he.bulkBuy3,he.operationalEfficiency],trigger:({wigsMade:e,brand:t})=>e>=1e4&&t>=3e4,allowCost:{cash:25e4,power:qa},action:[(e,t)=>[{...e,powerDemand:e.powerDemand+t},ya()],qa],log:oe("1z","Research center now online")}].map((e=>({...e,cost:za(e.allowCost),duration:1e3*e.duration,description:`${e.description}.`,allowed:t=>Ua(t,e.allowCost)})));const Va=({vogue:e,vogueLimit:t})=>e>=t,ja=e=>[{...e,brand:e.brand+e.vogue,vogue:0,vogueLimit:Math.min(e.vogueMax,2*e.vogueLimit)},vt(it)],Qa=()=>Lt(Va,ja),Ja=(e,t)=>({vogueMax:e.vogueMax+t,vogueLimit:e.vogue===e.vogueLimit&&e.vogueLimit===e.vogueMax?e.vogueMax+t:e.vogueLimit}),Ka=new ee((e=>j(e))),Ya=({vogueLimit:e})=>Ka.get(e),Za=({vogue:e})=>j(Math.floor(e)),Xa=e=>5*(Math.sin(e+1e6)+1)*e%1,ei=()=>1e6*Math.random();class ti{random(){return this.rand(this.seed+ ++this.offset)}randomInt(e,t){return e===t?e:Math.floor(this.rand(this.seed+ ++this.offset)*(t-e+1)+e)}randomRange(e,t){return this.rand(this.seed+ ++this.offset)*(t-e)+e}setOffset(e){this.offset=e}constructor(e,t){this.seed=null!=e?e:ei(),this.offset=null!=t?t:0,this.rand=Xa}}const ai=new ti,ii=e=>{ai.setOffset(e)},ni=(e,t)=>ai.randomRange(e,t),ri=(e,t)=>ai.randomInt(e,t),oi=(e,t,a)=>()=>ai.randomInt(1,100)<e?t:a,si=(e,t,a)=>[e,ai.randomRange(t,a)],li=(e,t,a)=>[e,ai.randomInt(t,a)],ci=0,di=1,ui=2,gi=4,mi=8,hi=16,pi=(e,t)=>(e&t)===t,wi=e=>pi(e,mi),fi=e=>pi(e,gi)&&!pi(e,mi)&&!pi(e,hi),yi=e=>pi(e,hi),bi=()=>ui,vi=["Mock Tudor","Egyptian-style","Roman-esq","Brazilian","Paris-style","Old English","The Perm","Court dress","Traditional Japanese"];let Mi;const Si=new ee(((e,{randSeed:t,trendIteration:a})=>{Mi=new ti(t,Math.cos(e)+a);const i=[];for(let e=0;e<3;e+=1){let e=Mi.randomInt(0,13);for(;i.includes(e);)e=(e+1)%14;i.push(e)}return i})),Ci=e=>Si.get(e.trendProgress,e),ki=new ee(((e,t)=>{const a=Si.get(e,t);return a[Mi.randomInt(0,a.length-1)]})),Ii=e=>ki.get(e.trendProgress,e),Ai=new ee((e=>Math.floor(Math.log((e+1)**15)+20*(e+1)+100))),Bi=({strands:e,trendStatus:t,trendIteration:a})=>t===bi()&&e>=Ai.get(a+1),Ti=new ee((e=>{const t=`${j(Ai.get(e+1))} strands`;return X("Start a trend",t)})),Ni=e=>Ti.get(e.trendIteration),Pi=({trendIteration:e})=>{if(-1===e)return"none";const t=Math.floor(e/vi.length)+1,a=vi[e%vi.length];return 1===t?a:`${a} part ${t}`},xi=()=>({trendStatus:ui|gi|mi,trendDue:ri(2500,3500)}),Wi=e=>[{...e,...xi(),trendIteration:e.trendIteration+1,trendProgress:0,strands:e.strands-Ai.get(e.trendIteration+1)},vt(it)],Li=()=>Lt(Bi,Wi),Ri=oe("4a","Vogue limit increased"),Fi=e=>yi(e.trendStatus)?[{...e,...Ja(e,Math.floor(.6*e.vogueMax)),trendProgress:0,trendStatus:ui,...ce(e,Ri)},vt(it)]:e,Hi=e=>[{...e,...xi()},vt(it)],Di=se("4b","A new trend has started"),$i=e=>[{...e,...e.trends,trendStatus:ui|gi|hi,trendProgress:1,...ce(e,Di)},vt(it)],_i=(e,t)=>[{...e,...xi(),trendProgress:t},vt(it)],zi=e=>{const t=Math.floor(100*(e.trendProgress+ni(.01,Math.max(.04,e.trendProgress))))/100;return t>=1?$i:[_i,t]},Ei=e=>({...e,trendStatus:ui|gi,trendDue:0}),Oi=(e,t)=>({wigs:t,wigsHair:e[4],wigsNylon:e[3],wigsSilicone:e[2],wigsAlgae:e[1],wigsSmart:e[0]});var Ui=({wigs:e,wigsHair:t,wigsNylon:a,wigsSilicone:i,wigsAlgae:n,wigsSmart:r},o)=>{if(o>e)throw new Error(`stock reduction ${o} is less than ${e} wigs`);if(o===e)return Oi(new Array(5).fill(0),0);const s=[r,n,i,a,t];if(o>0){let e=o;for(let t=0;t<s.length;t+=1){const a=Math.min(s[t],e);if(s[t]-=a,e-=a,0===e)break}}return Oi(s,e-o)};const qi=0,Gi=1,Vi=2,ji=4,Qi=8,Ji=16,Ki=32,Yi=(e,t)=>e|t,Zi=(e,...t)=>t.reduce(((e,t)=>e&~t),e),Xi=(e,t)=>(e&t)===t,en=0,tn=1,an=2,nn=3,rn=4,on={hair:0,nylon:1,silicone:2,algae:3,smart:4,micro:5,microBio:6},sn=0,ln=1,cn=2,dn=3,un=4,gn=5,mn=e=>({scene:e,sceneTemp:qi}),hn=(e,t)=>[{...e,...mn(t)},vt(st)],pn=e=>[xt,{action:hn,payload:e}];var wn={randSeed:ei(),randOffset:0,gameTime:null,scene:sn,sceneTemp:Gi,nav:Mt,navSelected:Ct,achieved:[],log:[],cash:0,hair:100,wigCaps:10,nylon:0,silicon:0,micro:0,algae:0,microBio:0,wiglets:0,smartChips:0,strands:0,wigs:0,wigsHair:0,wigsNylon:0,wigsSilicone:0,wigsAlgae:0,wigsSmart:0,wigsMade:0,smartWigsSold:0,smartWigsFulfillment:0,handmadeId:0,handmadeRemaining:0,wigLogMessageId:null,research:[],researchId:null,strandsOn:!1,demandAccumulation:0,demandStartIndex:0,wigMakerSubtype:on.hair,fabricating:[{allocated:0,progress:0,rate:0,starved:!1,subtype:on.hair},{allocated:0,progress:0,rate:0,starved:!1},{allocated:0,progress:0,rate:0,starved:!1},{allocated:0,progress:0,rate:0,starved:!1,subtype:on.micro},{allocated:0,progress:0,rate:0,starved:!1}],fabricators:2,fabricatorsUnallocated:2,fabricatorActionQuantity:1,fabricatorMultiplier:1,fabricatorHyper:0,wigMakerLevel:0,wigCapMakerLevel:0,powerSupply:[zt],powerDemand:0,lowPower:!1,boostRemaining:0,buyLevel:0,autoSilicon:je(),campaigns:[],campaignRunning:null,campaignUpliftIteration:0,autoCampaign:je(),brand:0,brandMultiplier:1,orders:[0,0,0,0,0],bribes:0,vogue:0,vogueLimit:0,vogueMax:0,incidentId:null,incidentLast:null,incidentDue:null,trendStatus:ci,trendIteration:null,trendDue:0,trendProgress:0,algaePoolLevel:0,algaePoolSize:0,algaePool:0,algaeHarvest:0,autoPutty:je(),puttyEnhanced:0,meshIteration:0,meshIterationStep:0,meshNodes:0,meshConnections:0,meshNodeAccumulation:0,dataCenters:0,dataCenterProgress:0,compute:0,opportunity:null,prestige:!1,marketForcesAltView:je(),nodeLogMessageId:null,autoInstall:je()};class fn{write(e){t.localStorage.setItem(this.key,e)}read(){return t.localStorage.getItem(this.key)}exists(){return null!=t.localStorage.getItem(this.key)}remove(){t.localStorage.removeItem(this.key)}constructor(e){this.key=`wigmaker_${e}`}}function yn(e,t){switch(e[0]){case"{":return JSON.parse(e);case"w":return((e,t)=>{const a=Object.keys(t),i={};for(let t=0;t<a.length;t+=1)i[a[t]]=e[t];return i})(JSON.parse(window.atob(e.substr(1))),t);case"x":return((e,t)=>{const a=Object.keys(t).sort(),i={};for(let t=0;t<a.length;t+=1)i[a[t]]=e[t];return i})(JSON.parse(window.atob(e.substr(1))),t);default:throw new Error("Bad state data")}}const bn=e=>{return`x${window.btoa(JSON.stringify((t=e,Object.keys(t).sort().map((e=>t[e])))))}`;var t},vn=new fn("state"),Mn=e=>(ii(e.randOffset),e),Sn=()=>[Wt,Mn],Cn=e=>({...e,randOffset:ai.offset});let kn;const In=e=>(kn===e||(kn=e,vn.write(bn(Cn(e)))),e),An=()=>[Wt,In],Bn=e=>{const t=yn(vn.read(),wn);ii(t.randOffset),e(t,Sn())},Tn=()=>[Bn],Nn=()=>vn.exists(),Pn=e=>(vn.remove(),e),xn=()=>[Wt,Pn],Wn=e=>({incidentId:null,incidentDue:null,sceneTemp:Zi(e.sceneTemp,Vi)}),Ln=e=>[e,vt(it),An()],Rn=(e,t)=>Ln({...e,...Wn(e),...ce(e,t)}),Fn=oe("3f","Not enough wigs"),Hn=(e,t=[Rn,Fn])=>a=>0===a.wigs?t:e,Dn=new ee((e=>{const t=Math.min(95,12+e),a=Math.min(70,10+e),i=Math.min(249,24+e);return{wigHair:t,wigHairText:U(t),wigNylon:a,wigNylonText:U(a),wigSilicone:i,wigSiliconeText:U(i),wigAlgae:625,wigAlgaeText:U(625),wigSmart:1200,wigSmartText:U(1200),wiglet:5,wigletText:U(5)}}));var $n=({brand:e})=>Dn.get((e=>e<100?0:e>5e5?250:Math.floor(.005*e/Math.log(.1*e)))(e));const _n=(e,t)=>0===e?0:.9*e+(1-.9)*t;class zn{increment(e){this.current+=e}emit(e){const{current:t}=this;return this.current=0,0===t?0:_n(t,e)}constructor(){this.current=0}}const En=(e,t)=>({brand:e.brand+t*e.brandMultiplier});const On=oe("3z","Customer leaves happy, promises to tell friends"),Un=oe("3A","Customer leaves disappointed"),qn=(e,t)=>Ln({...e,...Ui(e,Math.floor(e.wigs*t)),...En(e,Math.floor(e.wigs*t)),cash:e.cash+45*Math.floor(e.wigs*t),...Wn(e),...ce(e,On)});var Gn={id:1,title:"Bulk sale",description:[`Offer received to bulk buy wigs for ${U(45)} each.`],actions:[[Hn([qn,1]),"Sell all"],[Hn([qn,.5]),"Sell 50%"],[[Rn,Un],"Sell none"]],allowed:({wigs:e})=>e>=20};const Vn=oe("3B",`As a token of their gratitude they pay ${U(2500)}`),jn=oe("3C","The request is ignored, perhaps that was an unwise move");var Qn={id:4,title:"Emergency dispatch",description:["Celebrity needs wig for opening night.","They are willing to pay a premium for it."],actions:[[Hn((e=>Ln({...e,...Ui(e,1),cash:e.cash+2500,...Wn(e),...ce(e,Vn)}))),"Dispatch wig"],[[Rn,jn],"Ignore the request"]],allowed:({wigs:e})=>e>=1};const Jn=oe("3n","Life resumes");var Kn={id:5,title:"Fire!",description:["An alarm was triggered and the warehouse evacuated.","No fire was found."],actions:[[[Rn,Jn],"Reset"]],allowed:({wigs:e})=>e>=100};const Yn=se("3q","Fire at wig making facility, no one was available for comment"),Zn=(e,t)=>Ln({...e,...Ui(e,k(e.wigs,t)),...Wn(e),...ce(e,Yn)});var Xn={id:6,title:"Fire!",description:["A small fire has broken out in the warehouse."],actions:[[Hn(si(Zn,1,80),[Rn,Yn]),"Evacuate"],[Hn(si(Zn,20,40),[Rn,Yn]),"Save the stock first"]],allowed:({wigs:e})=>e>=1e3};const er=oe("3a","Customer leaves happy, promises to tell friends");var tr={id:2,title:"Sold!",description:[`Customer arrives, wishes to buy wig stock for ${U(10)} a wig.`],actions:[[Hn((e=>Ln({...e,...Ui(e,e.wigs),cash:e.cash+10*e.wigs,...En(e,e.wigs),...Wn(e),...ce(e,er)}))),"Sell all"]]};const ar=oe("3h","Crowd leaves with thanks"),ir=oe("3i","Brand improved owing to generosity"),nr=oe("3s","Show them the door");var rr={id:7,title:"Free loaders",description:["No way to pay but a desire for wigs."],actions:[[Hn(oi(80,(e=>Ln({...e,...Ui(e,Math.min(e.wigs,5)),brand:e.brand+350,...Wn(e),...ce(e,ir)})),(e=>Ln({...e,...Ui(e,Math.min(e.wigs,5)),...Wn(e),...ce(e,ar)})))),"Offer complementary wigs"],[[Rn,nr],"Show them the door"]],allowed:({wigs:e})=>e>=20};const or=oe("3D","Reduced power supply"),sr=e=>{let t=!1;return e.filter((e=>!!(e!==zt&&e!==Et||t)||(t=!0,!1)))};var lr={id:8,title:"Sabotage",description:["Supply line to power grid severed."],actions:[[e=>[{...e,achieved:ge.include(e.achieved,me.inititalGridDestroyed),powerSupply:sr(e.powerSupply),...Wn(e),...ce(e,or)},ya(),vt(it),An()],"Continue"]],allowed:e=>e.powerSupply.length>2&&e.powerSupply.filter((e=>e===zt||e===Et)).length>0};const cr=oe("3E","Fabrication capacity reduced"),dr=(e,t)=>Ln({...e,fabricating:e.fabricating.map(((e,a)=>a===en?{...e,allocated:e.allocated-t}:e)),fabricators:e.fabricators-t,powerDemand:e.powerDemand-ka(e.fabricators,t),...Wn(e),...ce(e,cr)});var ur={id:9,title:"System hacked",description:["Milliner attack contained and repelled.","Affected fabricators inoperable."],actions:[[e=>[dr,k(e.fabricating[en].allocated,10)],"Continue"]],allowed:e=>e.fabricating[en].allocated>20};const gr=se("3L","Wig maker fined after publicly declaring association with corrupt politician"),mr=se("3M","Wig maker fined after police link with corrupt politician"),hr=se("3N","Police unable to link wig maker with corrupt politician");var pr={id:10,title:"Politician jailed for corruption",description:["Police probe link of assocation.",`Admit misconduct and pay ${U(25e4)} fine?`],actions:[[e=>Ln({...e,cash:e.cash-25e4,...Wn(e),...ce(e,gr)}),"Pay fine"],[oi(70,(e=>Ln({...e,cash:e.cash-75e4,...Wn(e),...ce(e,mr)})),[Rn,hr]),"Deny wrongdoing"]],allowed:({cash:e,bribes:t})=>e>75e4&&t>=7};const wr=oe("3w","The restart works, better keep fingers crossed"),fr=oe("3y","The restart fails, costs double to repair"),yr=oe("3x","Safety first; repairs complete");var br={id:11,title:"Cough, cough, splutter",description:["Machinery stalls due to lack of maintenance."],actions:[[oi(50,(e=>Ln({...e,...Wn(e),...ce(e,wr)})),(e=>Ln({...e,cash:e.cash-2e3,...Wn(e),...ce(e,fr)}))),"Restart machinery"],[e=>Ln({...e,cash:e.cash-1e3,...Wn(e),...ce(e,yr)}),"Halt to make repairs"]],allowed:e=>e.cash>2e3};const vr=oe("3c","A deal is made"),Mr=oe("3d","Too little cash, no deal"),Sr=oe("3t","Trader leaves disappointed"),Cr={quantity:100,price:9},kr={quantity:500,price:35},Ir=(e,{quantity:t,price:a})=>Ln({...e,nylon:e.nylon+t,cash:e.cash-a,...Wn(e),...ce(e,vr)}),Ar=(e,t)=>e.cash>=t.price?[Ir,t]:[Rn,Mr];var Br={id:12,title:"Nylon trading",description:["“Quality nylon at bargain prices”"],actions:[[[Ar,Cr],`Buy ${Cr.quantity} @ ${U(Cr.price)}`],[[Ar,kr],`Buy ${kr.quantity} @ ${U(kr.price)}`],[[Rn,Sr],"Buy nothing"]]};const Tr=oe("3r","Nylon transferred to stores"),Nr=We,Pr=e=>Ln({...e,nylon:e.nylon+Nr,...Wn(e),...ce(e,Tr)});var xr={id:13,title:"Politician comes good",description:["“Mistake” by supply results in large nylon delivery"],actions:[[Pr,"Assume it was a gift"],[Pr,"Thank the supplier"]]};const Wr=oe("3j",`${U(350)} has been credited to the account`),Lr=oe("3k","No cash has been forthcoming"),Rr=oe("3l","Wig taken, nothing offered"),Fr=oe("3m","Wig swapped for 80 nylon"),Hr=oe("3v","With a cure they depart");var Dr={id:14,title:"Wig request",description:["Someone desperately needs a wig, promises to pay later."],actions:[[Hn(oi(80,(e=>Ln({...e,...Ui(e,1),cash:e.cash+350,...Wn(e),...ce(e,Wr)})),(e=>Ln({...e,...Ui(e,1),...Wn(e),...ce(e,Lr)})))),"Give wig"],[Hn(oi(80,(e=>Ln({...e,...Ui(e,1),nylon:e.nylon+80,...Wn(e),...ce(e,Fr)})),(e=>Ln({...e,...Ui(e,1),...Wn(e),...ce(e,Rr)})))),"Suggest a trade"],[[Rn,Hr],"Turn them away"]],allowed:({wigs:e})=>e>=20};const $r=se("3J","Peaceful protest at wig maker ends"),_r=se("3K","Protest turns nasty at wig maker as heavy handed police make arrests"),zr=[Rn,_r];var Er={id:15,title:"Protesters",description:["A large group of protesters has arrived with placards raised high.","Placards refer to toxic algae blooms."],actions:[[oi(75,Hn(si(((e,t)=>Ln({...e,...Ui(e,k(e.wigs,t)),...Wn(e),...ce(e,$r)})),1,20),zr),zr),"Offer free wigs"],[zr,"Dispel the dissidents"]],allowed:({achieved:e,wigs:t})=>ge.has(e,pe.algaeIncubator)&&t>=1e3};const Or=se("3e","Raid reported at wig maker, no one was available for comment"),Ur=(e,t)=>Ln({...e,...Ui(e,k(e.wigs,t)),...Wn(e),...ce(e,Or)});var qr={id:16,title:"It’s a raid!",description:["People with guns arrive demanding wig stock."],actions:[[Hn(si(Ur,5,50),[Rn,Or]),"Allow the raid"],[Hn(si(Ur,5,50),[Rn,Or]),"Run for it!"]],allowed:({wigs:e})=>e>=100};const Gr=oe("3I","Stock levels updated");var Vr={id:17,title:"Stock check",description:["Recent stock check reports additional units."],actions:[[oi(50,li(((e,t)=>Ln({...e,nylon:e.nylon+t,...Wn(e),...ce(e,Gr)})),200,800),li(((e,t)=>Ln({...e,silicon:e.silicon+t,...Wn(e),...ce(e,Gr)})),200,800)),"Update stock values"]]};const jr=oe("3H","Researchers send thanks and $20"),Qr=e=>Ln({...e,cash:e.cash+20,...Wn(e),...ce(e,jr)});var Jr={id:18,title:"Survey",description:["Preference survey on hair style:"],actions:[[Qr,"Curly"],[Qr,"Straight"]]};const Kr=oe("3p","Thief remains elusive"),Yr=(e,t)=>Ln({...e,...Ui(e,k(e.wigs,t)),...Wn(e),...ce(e,Kr)});var Zr={id:19,title:"Stock levels lower than thought",description:["A stocktake has found units missing."],actions:[[Hn(si(Yr,1,20),[Rn,Kr]),"Attempt to catch the thief"],[Hn(si(Yr,1,20),[Rn,Kr]),"Move on"]],allowed:({wigs:e})=>e>=100};const Xr=oe("3O","Nothing can be done to recover stolen wigs");var eo={id:3,title:"Theft",description:["Fake identity used to steal large quantity of wigs."],actions:[[Hn(si(((e,t)=>Ln({...e,...Ui(e,k(e.wigs,t)),...Wn(e),...ce(e,Xr)})),30,75),[Rn,Xr]),"Continue"]],allowed:({wigs:e})=>e>=1e3};const to=oe("3g","A successful trade"),ao=oe("3u","Trader leaves disappointed");var io={id:20,title:"Market trader",description:["Trader thinks there might be interest in exchange for wigs.","Wants whole stock; offers choice of rates per wig."],actions:[[Hn([(e,t)=>Ln({...e,...Ui(e,e.wigs),...En(e,e.wigs),hair:e.hair+t*e.wigs,...Wn(e),...ce(e,to)}),150]),"150 hair"],[Hn([(e,t)=>Ln({...e,...Ui(e,e.wigs),...En(e,e.wigs),nylon:e.nylon+t*e.wigs,...Wn(e),...ce(e,to)}),300]),"300 nylon"],[Hn([(e,t)=>Ln({...e,...Ui(e,e.wigs),...En(e,e.wigs),silicon:e.silicon+t*e.wigs,...Wn(e),...ce(e,to)}),25]),"25 silicon"],[[Rn,ao],"Dismiss"]],allowed:({wigs:e})=>e>=2},no=0;const ro=[{cost:5,quantity:10},{cost:35,quantity:100},{cost:75,quantity:1100},{cost:105,quantity:1400},{cost:220,quantity:176e3}],oo=({cash:e,buyLevel:t})=>e>=ro[t].cost,so=new ee((e=>{const t=`+${j(ro[e].quantity)}`,a=U(ro[e].cost);return X(t,a)})),lo=e=>[{...e,hair:e.hair+ro[e.buyLevel].quantity,cash:e.cash-ro[e.buyLevel].cost},vt(it)],co=()=>Lt(oo,lo),uo=({buyLevel:e})=>ro[e].cost,go=oe("3o","The gift is small but sufficient");var mo={id:21,title:"Gift from a friend",description:["Just a little bit of money to help out a friend."],actions:[[e=>Ln({...e,cash:e.cash+Math.max(500,2*uo(e)),orders:e.orders.map(((e,t)=>t===no?e+1:e)),...Wn(e),...ce(e,go)}),"Accept"]]};const ho=oe("3F",`Conference is a roaring success. ${U(11e4)} credited`),po=se("3G","Vegans denied wigs");var wo={id:22,title:"Conference of vegans",description:["Natural wigs needed for vegan conference.",`200 algae-based wigs are needed and offer ${U(550)} each.`],actions:[[e=>Ln({...e,wigs:e.wigs-200,wigsAlgae:e.wigsAlgae-200,...En(e,200),cash:e.cash+11e4,...Wn(e),...ce(e,ho)}),"Sell wigs"],[[Rn,po],"Ignore the request"]],allowed:({wigsAlgae:e})=>e>=200};const fo=se("3b","Rivalry between hat makers and wig makers turns to open conflict");const yo=[rr,Dr],bo=[Gn,rr,Dr,io],vo=[Kn,qr,Vr,Zr],Mo=[Qn,Xn,lr,ur,Vr,wo],So=[eo,Qn,lr,ur,pr,Er],Co=[eo,lr,ur,Er,Jr],ko=[tr,xr,mo,{id:23,title:"From the Consortium of Milliners",description:["That’s far enough.","We can no longer tolerate this encroachment into our domain."],actions:[[e=>Ln({...e,achieved:ge.include(e.achieved,me.warStarted),...Wn(e),incidentDue:3e4,...ce(e,fo)}),"Continue"]]},br,Br],Io=Array.from(new Set(ko.concat(yo).concat(bo).concat(vo).concat(Mo).concat(So).concat(Co))),Ao=new Map(Io.map((e=>[e.id,e]))),Bo=e=>Ao.get(e),To=(e,t)=>[{...e,incidentId:t,incidentDue:null,incidentLast:t,nav:Tt(e.nav,Ct,St),sceneTemp:Yi(e.sceneTemp,Vi)},An(),vt(ut)],No=({wigsMade:e})=>e<25e4?20:30,Po=e=>({...e,incidentDue:6e4*No(e)}),xo=e=>{const{incidentLast:t}=e,a=(({wigsMade:e,achieved:t})=>e<300?[]:e<750?yo:e<1e4?bo:ge.has(t,me.warStarted)?ge.has(t,me.inititalGridDestroyed)?ge.has(t,pe.mesh)?ge.has(t,pe.smartWigs)?ge.has(t,fe.wipeAwayCompetitors)?[]:Co:So:Mo:[lr]:vo)(e).filter((e=>e.id!==t)).filter((t=>void 0===t.allowed||t.allowed(e)));if(0===a.length)return null;return a[ri(0,a.length-1)].id};var Wo=[{id:me.manufacture,trigger:({wigsMade:e})=>e>=3,log:oe("6a","An admirable piece of craftsmanship")},{id:me.firstCustomer,trigger:({wigsMade:e})=>e>=6,action:[To,2]},{id:me.notions,trigger:({wigsMade:e})=>e>=8,log:oe("6b","Ideas bubble as wigs form")},{id:me.nylonBuyEarly,trigger:({wigsMade:e})=>e>120,milestones:[he.nylonWigs,we.socialMedia],action:[To,12]},{id:me.vogue,trigger:({wigsMade:e,brand:t})=>t>=1200&&e>=150,milestones:[he.marketing],action:e=>({...e,vogue:0,vogueLimit:15,vogueMax:120}),log:se("6c","Wigs set to come into vogue")},{id:me.trendsVisible,trigger:({brand:e})=>e>=5e3,milestones:[he.marketing],action:e=>({...e,trendStatus:di,trendIteration:-1}),log:oe("6d","Branding starts to become influential")},{id:me.trendsEnabled,trigger:({brand:e})=>e>=15e3,milestones:[me.vogue],action:e=>({...e,trendStatus:bi()}),log:oe("6e","Brand strong enough for trend setting")},{id:me.bribes,trigger:({brand:e})=>e>=5e3,milestones:[we.politicalInfluencers],log:se("6f","Hat sales struggle, wigs on the up")},{id:me.war,trigger:({wigsMade:e,bribes:t})=>t>=5&&e>=1e4,milestones:[he.siliconeWigs],action:[To,23]},{id:me.hatDrop,trigger:({wigsMade:e})=>e>=18e4,milestones:[pe.storage],log:se("6h","Hat wearing sees big drop")},{id:me.nylonTransfer,trigger:({wigsMade:e})=>e>=25e4,milestones:[me.war,pe.storage],action:[To,13]},{id:me.fabQuantitySwitchNewLevel,trigger:({fabricators:e})=>e>=400,log:oe("6g","Additional fabricator bulk action quantity available")}];const Lo=e=>Math.floor(.8*e),Ro=new ee((e=>N((e+1)**3*ye))),Fo=({algaePoolLevel:e,cash:t})=>e<50&&t>=Ro.get(e),Ho=new ee(((e,{algaePoolSize:t})=>{if(e>=50)return"(maxed)";const a=`+${j(Lo(t))}`,i=U(Ro.get(e));return X(a,i)})),Do=e=>Ho.get(e.algaePoolLevel,e),$o=new ee((e=>j(e))),_o=({algaePoolSize:e})=>$o.get(e),zo=({algaePool:e})=>j(Math.floor(e)),Eo=({algaePoolSize:e,algaePool:t})=>{const a=t/e;return a<.2?"Emergent":a<.3?"Developing":a<.5?"Prospering":a<.7?"Flourishing":"Blooming"},Oo=e=>[{...e,cash:e.cash-Ro.get(e.algaePoolLevel),algaePoolLevel:e.algaePoolLevel+1,algaePoolSize:e.algaePoolSize+Lo(e.algaePoolSize)},vt(it)],Uo=()=>Lt(Fo,Oo),qo=(e,t)=>[{...e,algaeHarvest:t},vt(it)],Go=e=>[{...e,autoPutty:Ye(e.autoPutty)},vt(nt)];var Vo=[{id:pe.wigMakerSwitcher,title:"Wig demand handler",description:"Purchase factory module for automatically switching wig type based on demand",duration:100,trigger:({wigsMade:e})=>e>=4e4,allowCost:{cash:27e4},log:oe("8d","Auto wig switch module now installed")},{id:pe.autoSilicon,title:"Auto-buy silicon",description:"Just in time silicon",duration:120,milestones:[pe.wigMakerSwitcher],trigger:({wigsMade:e})=>e>=5e4,allowCost:{cash:23e4},action:e=>({...e,autoSilicon:Qe()}),log:oe("8f","Silicon auto buy available")},{id:pe.newMarkets,title:"Open up new markets",description:"Drive wig sales into new markets",duration:285,allowCost:{cash:45e4,brand:56e4},action:[$a,2],log:oe("8a","New markets open for business")},{id:pe.international,title:"Global expansion",description:"Prestigious offices in key geographic regions around the globe",duration:240,milestones:[pe.newMarkets,we.coiffeur],trigger:({wigsMade:e})=>e>=11e4,allowCost:{cash:Me,brand:ve+be},action:[$a,4],log:oe("8b","Globally influencing wig wearing interests")},{id:pe.distributionNetwork,title:"Wig distribution network",description:"Get wigs to those who need them the most",duration:200,milestones:[pe.international,pe.autoSilicon],trigger:({wigsMade:e})=>e>=16e4,allowCost:{cash:13e5},action:[$a,1],log:se("8k","Same day wig delivery now a reality")},{id:pe.franchise,title:"Franchise outlets",description:"Setup shop throughout the world",duration:300,milestones:[pe.distributionNetwork,we.game],trigger:({wigsMade:e})=>e>=6e5,allowCost:{cash:7e6,brand:5e6},action:[$a,3],log:oe("8c","Selling wigs has never been easier")},{id:pe.microCompute,title:"Micro Compute pattern",description:"Single use hardware/software units",duration:150,milestones:[pe.autoSilicon,pe.newMarkets,we.dogs],trigger:({wigsMade:e,brand:t})=>e>=16e4&&t>=14e4,allowCost:{cash:19e5},log:oe("8e","Micro compute units now available for manufacture")},{id:pe.mesh,title:"The Mesh",description:"Dedicated private network infrastructure",duration:300,milestones:[pe.microCompute,me.warStarted],allowCost:{cash:Te,micro:15e3},action:e=>({...e,nav:Tt(e.nav,It)}),log:oe("8g","Mesh online")},{id:pe.storage,title:"Storage optimization",description:"Accelerated fabricators through Just in Time supply management",duration:130,milestones:[pe.microCompute],trigger:({wigsMade:e})=>e>=15e4,allowCost:{micro:25},action:[_a,3],log:oe("8m","Fabricator performance improved")},{id:pe.powerChaining,title:"Power chaining",description:"Increase power output through collector stepping",duration:80,milestones:[pe.storage],trigger:({wigsMade:e})=>e>=3e5,allowCost:{micro:250},action:e=>({...e,powerSupply:[...e.powerSupply]}),log:oe("8q","Solar and wind collection upgraded")},{id:pe.multiLayered,title:"Multi-layered fabrication",description:"Parallelize the fabrication process",duration:260,milestones:[pe.powerChaining,pe.storage],trigger:({wigsMade:e})=>e>=2e5,allowCost:{micro:500},action:[_a,6],log:oe("8t","Fabricator performance improved")},{id:pe.algaeIncubator,title:"Vegan-friendly wigs",description:"Wigs made from all natural algae fibres",duration:160,milestones:[pe.storage,pe.distributionNetwork,we.game],trigger:({wigsMade:e,brand:t})=>e>=9e5&&t>=95e5,allowCost:{cash:Me,micro:3500},action:e=>({...e,algaePoolLevel:1,algaePoolSize:4e4,algaePool:3e4,algaeHarvest:.9}),log:oe("8i","Algae wigs are an innovation to behold")},{id:pe.campaignManager,title:"Campaign Manager",description:"Automate campaign implementations",duration:90,milestones:[pe.powerChaining,we.moustacheShaming],trigger:({brand:e})=>e>=Ce,allowCost:{cash:12e5,micro:2e3},action:e=>({...e,autoCampaign:Qe()}),log:oe("8s","Campaign manager ready to roll")},{id:pe.voidPower,title:"Void",description:"Harness the power of the Void",duration:55,milestones:[pe.algaeIncubator,pe.microCompute],trigger:({powerDemand:e})=>e>=45e4,allowCost:{cash:Ie,micro:1e4},action:e=>({...e,powerSupply:[qt],lowPower:!1}),log:oe("8r","Void power online")},{id:pe.hyperFab,title:"hyperFab",description:"Fabricator performance enhancers",duration:45,milestones:[pe.mesh,pe.voidPower,pe.multiLayered,pe.campaignManager],trigger:({dataCenters:e})=>e>=1,allowCost:{cash:38e6,micro:1e3,brand:Te},log:oe("8p","hyperFab ready")},{id:pe.smartWigs,title:"Smart wig pattern",description:"Internet connected wigs with voice control",duration:90,milestones:[pe.hyperFab,we.noHairToHide],allowCost:{cash:182e6,micro:45e3},action:e=>({...e,autoPutty:Qe(),marketForcesAltView:Qe()}),log:[se("8j","New smart wigs wipe the floor with “outdated” models"),oe("8B","Algae synaptic putty enhancer idle")]},{id:pe.drone,title:"Drone-based delivery",description:"Auto landing capability for immediate wig placement",duration:70,milestones:[pe.smartWigs],allowCost:{cash:He,micro:be},action:e=>({...e,brand:e.brand+Ne,brandMultiplier:35}),log:oe("8l","Customers go crazy for precision wig drops")},{id:pe.capitalize,title:"Capitalize on investment",description:"Use newfound connectivity to further interests",duration:90,milestones:[pe.smartWigs,we.brandLoyalty],trigger:({meshNodes:e,brand:t})=>e>=Ae&&t>=15e7,allowCost:{cash:De},log:oe("8u","More opportunities forthcoming")},{id:pe.thinair,title:"Efficiency out of thin air",description:"Reduced oxygen levels around fabricators to improve operational efficiency",duration:80,milestones:[pe.voidPower,pe.capitalize],trigger:({meshNodes:e,fabricators:t})=>e>=Be&&t>=1e3,allowCost:{cash:25e9,micro:4e5},action:[_a,5e3],log:oe("8y","Fabricator oxygen level reduced")},{id:pe.loyaltyByDesign,title:"Brand loyalty by design",description:"Overhaul product design to encourage brand retention",duration:120,milestones:[pe.thinair],trigger:({meshNodes:e})=>e>=xe,allowCost:{cash:18e9,micro:Ce},log:se("8w","Social media explodes on overhauled designs")},{id:pe.microBio,title:"Micro+Bio compute pattern",description:"Faster and more powerful compute units through organic integration",duration:60,milestones:[pe.thinair,fe.bioResearch],allowCost:{cash:Ee,micro:Te},log:oe("8n","The ultimate blend of organic and inorganic")},{id:pe.subzero,title:"Subzero manufacturing",description:"Fabrication at absolute zero temperatures",duration:60,milestones:[fe.bioResearch,pe.hyperFab,we.goldenWig],trigger:({meshNodes:e})=>e>=We,allowCost:{cash:ze+4e10,micro:Ie},action:[_a,3e4],log:oe("8v","Fabricator performance improved")},{id:pe.autoInstall,title:"Auto install",description:"Install micro compute into data centers automatically",duration:45,trigger:({meshNodes:e})=>e>=Fe+Pe,allowCost:{cash:Ee,micro:ke},action:e=>({...e,autoInstall:Qe()}),log:oe("8z","Auto compute install available")},{id:pe.demandLinking,title:"Demand-fabrication linking",description:"Order fulfilment streamlining",duration:70,milestones:[pe.subzero,pe.microBio],trigger:({brand:e})=>e>=ze,allowCost:{cash:ze,micro:Se},action:[Fa,4],log:oe("8A","Order backlog redundant due to streamlining")},{id:pe.droneSquadrons,title:"Unleash drone squadrons",description:"Harass persistent hat wearers",duration:80,milestones:[pe.loyaltyByDesign,pe.demandLinking,fe.wipeAwayCompetitors],trigger:({meshNodes:e})=>e>=$e,allowCost:{free:!0},log:oe("8x","Drone squadrons unleashed")}].map((e=>({...e,duration:1e3*e.duration,milestones:(null!==(qs=e.milestones)&&void 0!==qs?qs:[]).concat(he.research),description:`${e.description}.`,cost:za(e.allowCost),allowed:t=>Ua(t,e.allowCost)})));const jo=["London","Toyko","Chicago","Houston","Boston","San Diego","Milan","Copenhagen","Karachi","Sydney","Nairobi","Lima","Rio"],Qo=jo.length,Jo=_e,Ko=Math.ceil(Jo/(Qo+1)),Yo=({dataCenters:e})=>e>Qo?1/0:Ko*e,Zo=e=>e.dataCenters>0&&e.meshNodes>=Yo(e),Xo=new ee((e=>e===Qo?5e12:N(Ne*Math.exp(e)**.81))),es=e=>e>Qo,ts=e=>85e3*e*(e<10?1.2:2.1),as=new ee((e=>j(ts(e)))),is=e=>{let t=ts(e.dataCenters)-e.compute;const a=Math.min(e.micro,t);t-=a;const i=Math.min(e.microBio,Math.floor(t/5));return{microUnits:a,microBioUnits:i,additionalCompute:a+5*i}},ns=e=>e.dataCenters>0&&(e=>{const{microUnits:t,microBioUnits:a}=is(e);return t+a})(e)>0,rs=({dataCenterProgress:e})=>0!==e,os=({dataCenters:e,cash:t,dataCenterProgress:a})=>0===a&&!es(e)&&t>=Xo.get(e),ss=new ee((e=>{if(es(e))return"(maxed)";const t=e===jo.length?"Decentralized infrastructure":`Commission ${jo[e]} center`,a=U(Xo.get(e));return X(t,a)})),ls=({dataCenters:e})=>ss.get(e),cs=e=>[{...e,cash:e.cash-Xo.get(e.dataCenters),dataCenterProgress:.001},vt(it)],ds=()=>Lt(os,cs),us=(e,t)=>{const{microUnits:a,microBioUnits:i,additionalCompute:n}=is(e);return[{...e,micro:e.micro-a,microBio:e.microBio-i,compute:e.compute+n},!t&&vt(it)]},gs=()=>Lt(ns,us),ms=e=>[{...e,autoInstall:Ye(e.autoInstall)},vt(nt)],hs=({dataCenters:e})=>1e3*(120-3*e),ps=e=>({dataCenters:Math.min(e.dataCenters+1,Qo),compute:e.compute+k(85e3,40)}),ws=oe("4c","Data center complete"),fs=e=>({...e,dataCenters:e.dataCenters+1,dataCenterProgress:0,...ce(e,ws)}),ys=1,bs=2,vs=4,Ms=8,Ss=16,Cs=32,ks=(e,t)=>e|t,Is=(e,t)=>(e&t)===t,As=(e,t)=>e^t,Bs=new fn("options");let Ts;const Ns=()=>{Bs.write(bn({o:Ts}))},Ps=()=>{const e=document.documentElement;e.removeAttribute("data-theme","dark"),e.removeAttribute("data-themeOverlay","mesh"),Is(Ts,ys)||(e.setAttribute("data-theme","dark"),Is(Ts,vs)&&e.setAttribute("data-themeOverlay","mesh"))},xs=()=>{Is(Ts,Ms)?wt.forEach((e=>e.mute())):wt.forEach((e=>e.unmute()))},Ws=e=>e((e=>({...e}))),Ls=(e,t)=>{Ts=((e,...t)=>t.reduce(((e,t)=>e&~t),e))(Ts,ys,bs,vs),void 0!==t&&(Ts=ks(Ts,t),t===vs&&(Ts=ks(Ts,Ss))),Ps(),Ns(),Ws(e)},Rs=e=>[Ls,e],Fs=(e,t)=>[e,Rs(t)],Hs=e=>Is(Ts,e),Ds=()=>!Is(Ts,Ms),$s=()=>!Is(Ts,Cs),_s=e=>{Ts=As(Ts,Ms),Ns(),xs(),Ws(e)},zs=e=>[e,[_s]],Es=e=>{Ts=As(Ts,Cs),Ns(),Ws(e)},Os=e=>[e,[Es]];var Us,qs,Gs=[{id:fe.meshMode,title:"Enable elite Mesh Mode",compute:9e4,trigger:({meshNodes:e})=>e>=100,action:e=>[{...e,prestige:!0},Rs(vs),vt(pt)],log:oe("0k","Mesh mode enabled")},{id:fe.hairStocks,title:"Secure global hair stocks",compute:2e5,trigger:({meshNodes:e})=>e>=100,action:e=>({...e,hair:1e12}),log:oe("0c","Global hair supplies transferred to stores")},{id:fe.heist1,title:"Acquire additional funds",compute:ve,trigger:({meshNodes:e})=>e>=5e4,action:e=>({...e,cash:e.cash+$e}),log:se("0a","Bank reports major security breach with an undisclosed sum stolen")},{id:fe.transferDataCenter,title:"Data center ownership transfer",compute:4e6,milestones:[we.brandLoyalty,pe.drone],trigger:({meshNodes:e})=>e>=ve,action:e=>[{...e,...ps(e)},ya()],log:oe("0i","Data center transfer complete")},{id:fe.disruptShampoo,title:"Disrupt shampoo supplies",compute:ve,milestones:[pe.capitalize],trigger:({meshNodes:e})=>e>=Ne,action:[$a,20],log:se("0d","Shampoo shortage boon for wig makers")},{id:fe.bioResearch,title:"Obtain bio research",compute:Ae,trigger:({meshNodes:e})=>e>=xe,log:oe("0b","Research data obtained")},{id:fe.doctorWaterSupply,title:"Doctor water supply",compute:Ie,trigger:({meshNodes:e})=>e>=6e8,log:se("0g","Experts advise “baldness is now universal”")},{id:fe.wipeAwayCompetitors,title:"Starve the competition",compute:Te,milestones:[pe.drone,we.politicalAcumen,pe.autoInstall],trigger:({meshNodes:e})=>e>=Le,action:e=>({...e,cash:e.cash+5e13}),log:se("0f","Single wig supplier remains after outmanoeuvring competition")},{id:fe.controlMedia,title:"Control the media",compute:Ne,milestones:[pe.subzero,we.dominance],trigger:({meshNodes:e})=>e>=3e9,log:se("0h","Wigs, wigs, nothing but wigs")},{id:fe.eradicateMilliners,title:"Eradicate Milliners",compute:be,duration:20,milestones:[pe.droneSquadrons,we.everyHead],trigger:({meshNodes:e})=>e>=Jo,action:e=>[{...e,...mn(un)},xn(),vt(dt)]}].map((e=>({...e,duration:1e3*(null!==(Us=e.duration)&&void 0!==Us?Us:150),milestones:(null!==(qs=e.milestones)&&void 0!==qs?qs:[]).concat(pe.smartWigs)})));var Vs=new class{getById(e){return this.idDictionary.get(e)}constructor(){this.notions=Ga,this.research=Vo,this.campaigns=at,this.milestoneTriggers=Wo,this.opportunities=Gs,this.allResearch=Ga.concat(Vo),this.idDictionary=new Map,this.all=Ga.concat(Vo).concat(at).concat(Wo).concat(Gs),this.all.forEach((e=>{this.idDictionary.set(e.id,e)}))}};const js=(e,{id:t,log:a})=>({...e,achieved:ge.include(e.achieved,t),...ce(e,a)}),Qs=(e,t)=>{null!=t.action&&e(t.action),e([js,t]),t.id!==fe.eradicateMilliners&&e(In)};var Js=e=>[Qs,e];const Ks="Notion",Ys="Res",Zs="Camp",Xs="Trig",el="Opp",tl=(e,t)=>({category:e,mapped:new Map(Object.entries(t).map((([e,t])=>[t,e])))}),al=()=>{const e=[tl(Ks,he),tl(Ys,pe),tl(Zs,we),tl(Xs,me),tl(el,fe)];return(()=>{let e=Vs.all;const t=[];let a=0;for(;0!==e.length;){if(a+=1,a>100)throw new Error(`Too many milestone match iterations, probably a bad occurs milestone in ${e[0].id}`);const i=e.filter((e=>void 0===e.milestones||e.milestones.every((e=>t.includes(e)||e===me.warStarted&&t.includes(me.war)))));t.push(...i.map((e=>e.id))),e=e.filter((e=>!t.includes(e.id)))}return t})().map((t=>e.map((e=>({id:t,category:e.category,name:e.mapped.get(t)}))).find((e=>void 0!==e.name))))};let il;window.requestAnimationFrame((()=>{il=al()}));const nl=(e,t)=>{const a={...e},i=[];for(let e=0;e<il.length;e+=1){const{id:o,category:s}=il[e];if(ge.has(a.achieved,o))continue;const l=Vs.getById(o);if(i.push(l),s===Ks||s===Ys)a.research=a.research.filter((e=>e.id!==o));else if(s===Zs){var n,r;a.campaigns=a.campaigns.filter((e=>e.id!==o)),(null===(n=a.campaignRunning)||void 0===n?void 0:n.id)===o&&(a.campaignRunning=null),a.brand+=null!==(r=l.brand)&&void 0!==r?r:0}else s===el&&(null===(n=a.opportunity)||void 0===n?void 0:n.id)===o?a.opportunity=null:void 0!==l.action&&Array.isArray(l.action)&&l.action[0]===To&&i.push({id:o,action:Bo(l.action[1]).actions[0][0]});if(o===t)break}return[{...a,incidentId:null},vt(it)].concat(i.map(Js))},rl=()=>il,ol=(e,t)=>ge.has(e.achieved,t),sl="#devtools"===window.location.hash,ll=e=>Xi(e.sceneTemp,Vi)||null!==e.incidentId,cl=e=>{return[{...e,sceneTemp:(t=e.sceneTemp,a=Vi,t^a)},An(),vt(gt)];var t,a},dl=e=>[{...e,sceneTemp:Yi(e.sceneTemp,Vi)},vt(gt)],ul=e=>null===e.incidentId?e:dl,gl=()=>[Wt,ul],ml=e=>({...e,sceneTemp:Nn()?qi:Gi}),hl=()=>[Wt,ml],pl=(e,t)=>[{...e,sceneTemp:t},vt(it)],wl=e=>[e,pn(sn),hl()],fl=e=>[e,Nn()&&Tn(),pn(ln),gl(),vt(mt)],yl=(e,t)=>{let a;try{a=yn(t,wn)}catch(t){return{...e,sceneTemp:Qi}}return a={...a,scene:e.scene,sceneTemp:e.scene===cn?Ji:qi},[a,Sn(),An(),a.prestige&&Rs(vs),e.scene===ln&&gl(),vt(it)]},bl=e=>[{...wn,scene:e.scene,sceneTemp:e.scene===cn?Ki:qi,prestige:e.prestige},Sn(),xn(),vt(it)],vl=e=>[e,An(),pn(sn)],Ml=e=>{return[{...wn,scene:sn,sceneTemp:Gi,prestige:e.prestige},Sn(),(t=dt,ft.get(t).stop())];var t};const Sl=()=>C("hr",{}),Cl=e=>C("span",{class:"spanBlock"},e),kl=e=>C("span",{},S(e)),Il=e=>C("span",{class:"marginRightHalf"},S(e)),Al=(e,t)=>kl(X(e,t)),Bl=(e,t)=>C("span",{class:e},S(t)),Tl=(e,t)=>C("div",null==t?{}:e,null==t?e:t),Nl=(e,t)=>C("button",e,t),Pl=(e,t)=>C("ul",null!=e?e:{},t),xl=(e,t)=>C("li",{key:e},t),Wl=e=>C("div",{class:"flexRow"},e),Ll=e=>C("div",{class:"flexRowLastRight"},e),Rl=e=>C("h3",{class:"panelHeader"},S(e));var Fl=(e,t)=>Tl({class:"panel"},[Rl(e),Tl({class:"panelBody"},t)]);const Hl=(e,t,a)=>C("svg",{viewBox:e,...t},a),Dl=(e,t,a,i,n)=>C("line",{x1:e,y1:t,x2:a,y2:i,...n}),$l=e=>C("path",{d:e}),_l=(e,t,a,i,n)=>C("rect",{x:e,y:t,width:a,height:i,...n}),zl=(e,t)=>ll(e)?e:t;var El=e=>ll(e)&&C("div",{class:"pausedOverlay"});var Ol=(e,t,a,i=!0)=>{return Je(t)&&Cl([Il(e),Nl({class:"toggleButton",onclick:[zl,a],disabled:!i&&"disabled"},[kl(Ke(t)?"On":"Off"),Ke(t)&&Hl("0 0 200 100",{class:"toggleButtonOverlay",preserveAspectRatio:"none"},(n=[0,40,80,120,160],n.map((e=>_l(e,0,"100%","100%",{class:"toggleButtonRect"})))))])]);var n},Ul=(e,t,a=!0,i)=>Nl({class:"actionButton",disabled:!a&&"disabled",onclick:[zl,t],...i},S(e));const ql=(e,t,a=!0,i)=>Nl({class:"actionButton",disabled:!a&&"disabled",onclick:[zl,t],...i},e);var Gl=(e,t,a,i,n)=>Nl({class:"actionButton",disabled:(!t||n>0)&&"disabled",onclick:[zl,a]},[kl(e),Hl("0 0 100 100",{preserveAspectRatio:"none",class:{actionButtonProgressbar:!0,actionButtonProgressbarOn:n>0},style:{transform:`scaleX(${n/i})`}},_l(0,0,100,100))]);const Vl=({type:e,uid:t,message:a})=>{switch(e){case ie:return((e,t)=>C("li",{key:e,class:["logItem","logItemNews"]},S(`News: ${t}`)))(t,a);case ne:return((e,t)=>C("li",{key:e,class:["logItem","logItemMesh"]},S(t)))(t,a);default:return((e,t)=>C("li",{key:e,class:["logItem","logItemGeneral"]},S(t)))(t,a)}};var jl=e=>{return t=(({log:e})=>ue.get(e))(e).map(Vl),C("ol",null==a?{}:t,null==a?t:a);var t,a};const Ql=e=>C("main",{},e),Jl=e=>C("section",{class:"leftArea"},e),Kl=e=>C("section",{class:"rightArea"},e),Yl=e=>C("h2",{class:"titleArea"},S(e)),Zl=(e,t,a=!0)=>Nl({class:"dialogButton",onclick:t,disabled:!a},S(e)),Xl=(e,t,a=!0)=>Nl({class:["dialogButton","confirm"],onclick:t,disabled:!a},S(e)),ec=(e,t,a=!0)=>Nl({class:"dialogButton",onclick:e,disabled:!a},S(t)),tc=(e,t)=>C("table",{class:e},t),ac=(e,t)=>C("tr",null==t?{}:e,null==t?e:t),ic=(e,t)=>C("td",null==t?{}:e,null==t?e:t),nc=e=>C("th",{},e),rc=$l("M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"),oc=$l("M19.93,8.21l-3.6,1.68L14,7.7V6.3l2.33-2.19l3.6,1.68c0.38,0.18,0.82,0.01,1-0.36c0.18-0.38,0.01-0.82-0.36-1L16.65,2.6 c-0.38-0.18-0.83-0.1-1.13,0.2l-1.74,1.6C13.6,4.16,13.32,4,13,4c-0.55,0-1,0.45-1,1v1H8.82C8.34,4.65,6.98,3.73,5.4,4.07 C4.24,4.32,3.25,5.32,3.04,6.5C2.82,7.82,3.5,8.97,4.52,9.58L7.08,18H4v3h13v-3h-3.62L8.41,8.77C8.58,8.53,8.72,8.28,8.82,8H12v1 c0,0.55,0.45,1,1,1c0.32,0,0.6-0.16,0.78-0.4l1.74,1.6c0.3,0.3,0.75,0.38,1.13,0.2l3.92-1.83c0.38-0.18,0.54-0.62,0.36-1 C20.75,8.2,20.31,8.03,19.93,8.21z M6,8C5.45,8,5,7.55,5,7s0.45-1,1-1s1,0.45,1,1S6.55,8,6,8z"),sc=$l("M11 21h-1l1-7H7.5c-.58 0-.57-.32-.38-.66.19-.34.05-.08.07-.12C8.48 10.94 10.42 7.54 13 3h1l-1 7h3.5c.49 0 .56.33.47.51l-.07.15C12.96 17.55 11 21 11 21z"),lc=$l("M20,9H4v2h16V9z M4,15h16v-2H4V15z"),cc=$l("M9 21c0 .5.4 1 1 1h4c.6 0 1-.5 1-1v-1H9v1zm3-19C8.1 2 5 5.1 5 9c0 2.4 1.2 4.5 3 5.7V17c0 .5.4 1 1 1h6c.6 0 1-.5 1-1v-2.3c1.8-1.3 3-3.4 3-5.7 0-3.9-3.1-7-7-7z"),dc=$l("M16,18v2H8v-2H16z M11,7.99V16h2V7.99h3L12,4L8,7.99H11z"),uc=$l("M19.97,6.43L12,2L4.03,6.43L9.1,9.24C9.83,8.48,10.86,8,12,8s2.17,0.48,2.9,1.24L19.97,6.43z M10,12c0-1.1,0.9-2,2-2 s2,0.9,2,2s-0.9,2-2,2S10,13.1,10,12z M11,21.44L3,17V8.14l5.13,2.85C8.04,11.31,8,11.65,8,12c0,1.86,1.27,3.43,3,3.87V21.44z M13,21.44v-5.57c1.73-0.44,3-2.01,3-3.87c0-0.35-0.04-0.69-0.13-1.01L21,8.14L21,17L13,21.44z"),gc=$l("M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"),mc=$l("M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"),hc=$l("M18.6 6.62c-1.44 0-2.8.56-3.77 1.53L7.8 14.39c-.64.64-1.49.99-2.4.99-1.87 0-3.39-1.51-3.39-3.38S3.53 8.62 5.4 8.62c.91 0 1.76.35 2.44 1.03l1.13 1 1.51-1.34L9.22 8.2C8.2 7.18 6.84 6.62 5.4 6.62 2.42 6.62 0 9.04 0 12s2.42 5.38 5.4 5.38c1.44 0 2.8-.56 3.77-1.53l7.03-6.24c.64-.64 1.49-.99 2.4-.99 1.87 0 3.39 1.51 3.39 3.38s-1.52 3.38-3.39 3.38c-.9 0-1.76-.35-2.44-1.03l-1.14-1.01-1.51 1.34 1.27 1.12c1.02 1.01 2.37 1.57 3.82 1.57 2.98 0 5.4-2.41 5.4-5.38s-2.42-5.37-5.4-5.37z"),pc=$l("M 5 5L15 10L5 15z"),wc=$l("M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"),fc=$l("M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"),yc=$l("M19 13H5v-2h14v2z"),bc=$l("M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"),vc=new Map([[he.marketing,rc],[he.packaging,rc],[he.wigs1,dc],[he.wigs2,dc],[he.wigs3,dc],[he.wigs4,dc],[he.wigCap1,lc],[he.wigCap2,lc],[he.wigCap3,lc],[he.wigCap4,lc],[he.fabricator,oc],[he.fabflow,oc],[he.operationalEfficiency,oc],[he.power,sc],[he.research,cc],[he.nylonWigs,mc],[he.siliconeWigs,uc],[he.wiglets,uc],[he.bulkBuy1,gc],[he.bulkBuy2,gc],[he.bulkBuy3,gc],[he.bulkBuy4,gc],[he.nationwide,rc]]),Mc=e=>Hl("0 0 24 24",e,sc),Sc=e=>Hl("0 0 24 24",e,fc),Cc=e=>Hl("0 0 24 24",e,yc),kc=e=>Tl({class:"powerIconContainer"},Mc({"aria-label":e})),Ic=()=>Tl({class:"powerIconContainer"},Mc({"aria-hidden":!0})),Ac=Tl({class:"powerOffline"},[S("offline"),kc("Offline due to low power")]),Bc=Tl({class:"boosted"},[Ic(),S("boosted")]),Tc=Tl({class:"lowPower"},[Ic(),S("low power")]),Nc=Tl({class:"powerOffline"},[kc("Safe mode due to low power"),S("safe mode")]),Pc=e=>Hl("0 0 50 50",{},e),xc=Pc([Dl(15,15,15,35),Dl(35,15,35,35)]),Wc=Pc($l("M 21 15 L 36 25 L 21 35 z")),Lc=Pc(_l(15,15,20,20)),Rc=(e,t,a,i)=>Nl({class:["playStateButton",t],onclick:cl,"aria-label":e,disabled:!a},i),Fc=Rc("pause game","runningButton",!0,xc),Hc=Rc("resume game","pausedButton",!0,Wc),Dc=Rc("game halted awaiting incident response","pausedIncidentButton",!1,Lc),$c=(e,t,a)=>Nl({class:{navButton:!0,navButtonSelected:a},disabled:a&&"disabled",onclick:[Pt,t]},S(e)),_c=(e,t)=>e===t,zc=({nav:e,navSelected:t})=>C("nav",{class:"navArea"},[Nt(e,St)&&$s()&&$c("Memo",St,_c(t,St)),Nt(e,Ct)&&$s()&&$c("Make",Ct,_c(t,Ct)),Nt(e,kt)&&$s()&&$c("Market",kt,_c(t,kt)),Nt(e,It)&&$s()&&$c("Mesh",It,_c(t,It)),sl&&!$s()&&$c("Main",Ct,_c(t,Ct)),sl&&$c("DevTools",At,_c(t,At))]),Ec=({gameTime:e})=>e&&kl((e=>{const t=parseInt(e/1e3%60,10),a=parseInt(e/6e4%60,10),i=parseInt(e/36e5%24,10);return`${i<10?`0${i}`:i}:${a<10?`0${a}`:a}:${t<10?`0${t}`:t}`})(e));var Oc=e=>{return C("header",{},[Tl({class:"titleArea"},C("h1",{class:"logoFont"},S("wigmaker"))),zc(e),ge.has(e.achieved,me.manufacture)&&Tl({class:"statsArea"},[Ec(e),e.lowPower&&kc("low power"),kl(`wigs made: ${a=e.wigsMade,Z(a<1e3?a:N(a,3))}`),kl(`cash: ${t=e.cash,x.format(N(t,3))}`)]),Tl({class:"menuArea"},[!ll(e)&&Fc,ll(e)&&(null===e.incidentId?Hc:Dc),Nl({class:"menuButton",onclick:vl},S("Menu"))])]);var t,a};const Uc=e=>C("p",{class:"logDetailedP"},S(e)),qc=({title:e,description:t,actions:a})=>Tl([Tl({class:"logDetailed"},[C("h3",{class:"logDetailedTitle"},S(e)),Tl(t.map(Uc)),Wl(a.map((([e,t])=>Nl({class:"actionButton",onclick:e},S(t)))))])]);var Gc=e=>(e.navSelected===St||!$s())&&Ql([Jl([null!=e.incidentId&&qc(Bo(e.incidentId)),$s()&&jl(e)])]),Vc={};e(Vc,"allowed",(function(){return jc})),e(Vc,"costTransform",(function(){return Qc})),e(Vc,"cost",(function(){return Jc})),e(Vc,"resourceMax",(function(){return Kc}));const jc=({hair:e,wigCaps:t})=>e>=4&&t>=1,Qc=({hair:e,wigCaps:t},a)=>({hair:e-4*a,wigCaps:t-1*a}),Jc=()=>"4 hair, wig cap",Kc=({hair:e,wigCaps:t})=>Math.min(Math.floor(e/4),Math.floor(t/1));var Yc=e=>{if(e>=52)throw new Error("Index is out of range");return String.fromCharCode(e<26?97+e:65+e-26)};const Zc=["A perruquier’s delight","A periwig like no other","A wig of very excellent intentions","A deliriously charming wig","There is glamour and then there are wigs","A joyous exhibition","The curls are so choice","Fine wigs never hats","Très, très chic","Hair from here, there and everywhere","Yet another fine wig","Marvelous","Simply divine","The cogs of industry begin to turn","Classically beautiful","Simply adorable","Goldilocks","No other head-ware is acceptable","Little else compares","Incomparable splendor","A truly splendid provision","Expansion, growth, these are the things to value most","Far better than a milliner’s hat","So many beautiful wigs","There are many signs of accomplishment","Distinctly the finest wig","Too delightful for just anyone","One would not wish anything else upon one’s head","Short and to the point","Avant-garde","One cannot shape the beauty into words","News:Wigs shining brightly","The Frizz","Dark, light, either is just right","Things are starting to get a bit hectic","A Milliner? Absurd","News:Wigs are flavor of the month","No need for dullness","The craftsmanship is superb","Absolutely fantastic","The transition has started","An utterly remarkable wig","News:Wig wearing takes country by storm","Works even in a dark room","Who is laughing now, Hatters?","Not making wigs but sculpting beauty","And the reign of hat wearing draws to a close","Divine is thy wig","News:Wig will they go from here?","Unparalleled hair styling","Hat makers be damned"].map(((e,t)=>({level:t<2?t+1:Math.floor((t+3)*t*.4),id:`5${Yc(t)}`,text:e}))).map((({level:e,id:t,text:a})=>[e,a.startsWith("News:")?se(t,a.substring("News:".length)):oe(t,a)])),Xc=(e,t)=>{var a;const i=(null!==(a=e.wigLogMessageId)&&void 0!==a?a:-1)+1;if(i>=Zc.length)return;const[n,r]=Zc[i];return n>e.wigsMade+t?void 0:{wigLogMessageId:i,...ce(e,r)}},ed=["a beautiful","a marvelous","a fabulous","a remarkable","a distinguished","an extraordinary","a charming","an outstanding","a fancy","a dapper","an elegant","a stupendous","an amazing","a spectacular","a quaint","a roguish","an admirable","an amiable","an astonishing","an astounding","a fantastic","a monumental","a smashing","a superb","a terrific","a wondrous","a miraculous","a breathtaking","a stunning","a tremendous","a phenomenal"].map((e=>`Create ${e} wig`)).concat(["Create a wig of distinction","Create a wig to behold"]),td=e=>{const t=ri(0,ed.length-1);return t!==e?t:(t+1)%ed.length},ad=e=>[{...e,...Qc(e,1),handmadeRemaining:4e3},vt(it)],id=()=>Lt(jc,ad),nd=e=>({...e,wigs:e.wigs+1,wigsMade:e.wigsMade+1,wigsHair:e.wigsHair+1,handmadeRemaining:0,handmadeId:td(e.handmadeId),...Xc(e,1)});var rd={};e(rd,"allowed",(function(){return $d})),e(rd,"costTransform",(function(){return _d})),e(rd,"cost",(function(){return zd})),e(rd,"duration",(function(){return Ed})),e(rd,"madeTransform",(function(){return Od})),e(rd,"resourceMax",(function(){return Ud}));var od={};e(od,"allowed",(function(){return sd})),e(od,"costTransform",(function(){return ld})),e(od,"cost",(function(){return cd})),e(od,"resourceMax",(function(){return dd}));const sd=({algae:e})=>e>=1,ld=({algae:e},t)=>({algae:e-1*t}),cd=()=>"1 algae",dd=({algae:e})=>Math.floor(e/1);var ud={};e(ud,"allowed",(function(){return gd})),e(ud,"costTransform",(function(){return md})),e(ud,"cost",(function(){return hd})),e(ud,"resourceMax",(function(){return pd}));const gd=({hair:e,nylon:t,wigCaps:a})=>e>=2&&t>=3&&a>=1,md=({hair:e,nylon:t,wigCaps:a},i)=>({hair:e-2*i,nylon:t-3*i,wigCaps:a-1*i}),hd=()=>"2 hair, 3 nylon, cap",pd=({hair:e,wigCaps:t,nylon:a})=>Math.min(Math.floor(e/2),Math.floor(a/3),Math.floor(t/1));var wd={};e(wd,"allowed",(function(){return Ad})),e(wd,"costTransform",(function(){return Bd})),e(wd,"cost",(function(){return Td})),e(wd,"resourceMax",(function(){return Nd}));const fd=[{cost:30,quantity:5},{cost:100,quantity:100},{cost:200,quantity:360},{cost:700,quantity:1660},{cost:950,quantity:9700}],yd=({cash:e,buyLevel:t})=>e>=fd[t].cost,bd=new ee((e=>{const t=`+${j(fd[e].quantity)}`,a=U(fd[e].cost);return X(t,a)})),vd=e=>bd.get(e.buyLevel),Md=({buyLevel:e,silicon:t,cash:a},i=1)=>{const n=fd[e],r=Math.ceil(i/n.quantity);return{silicon:t+r*n.quantity,cash:a-r*n.cost}},Sd=({cash:e,buyLevel:t,autoSilicon:a})=>Ke(a)?Math.floor(e/fd[t].cost)*fd[t].quantity:0,Cd=e=>[{...e,...Md(e)},vt(it)],kd=()=>Lt(yd,Cd),Id=e=>[{...e,autoSilicon:Ye(e.autoSilicon),powerDemand:e.powerDemand+(Ke(e.autoSilicon)?-1200:1200),...ua(e,Ke(e.autoSilicon)?1200:0)},ya(),vt(nt)],Ad=({silicon:e,wigCaps:t})=>e>=3&&t>=1,Bd=(e,t)=>{const a=3*t;let{silicon:i,cash:n}=e;if(Ke(e.autoSilicon)&&a>i){const t=Md(e,a-e.silicon);i=t.silicon,n=t.cash}return{silicon:i-a,wigCaps:e.wigCaps-1*t,cash:n}},Td=()=>"3 silicon, cap",Nd=e=>Math.floor(Math.min((e.silicon+Sd(e))/3,e.wigCaps/1));var Pd={};e(Pd,"allowed",(function(){return xd})),e(Pd,"costTransform",(function(){return Wd})),e(Pd,"cost",(function(){return Ld})),e(Pd,"resourceMax",(function(){return Rd}));const xd=({algae:e,smartChips:t})=>e>=1&&t>=1,Wd=({algae:e,smartChips:t},a)=>({algae:e-1*a,smartChips:t-1*a}),Ld=()=>"1 algae, chip",Rd=({algae:e,smartChips:t})=>Math.min(Math.floor(e/1),Math.floor(t/1)),Fd=[7,5,2.5,1.25,.8].map((e=>1e3*e)),Hd=new Map([[on.hair,Vc],[on.nylon,ud],[on.silicone,wd],[on.algae,od],[on.smart,Pd]]),Dd=new Map([[on.hair,(e,t)=>({wigsHair:e.wigsHair+t})],[on.nylon,(e,t)=>({wigsNylon:e.wigsNylon+t})],[on.silicone,(e,t)=>({wigsSilicone:e.wigsSilicone+t})],[on.algae,(e,t)=>({wigsAlgae:e.wigsAlgae+t})],[on.smart,(e,t)=>({wigsSmart:e.wigsSmart+t})]]),$d=(e,t)=>Hd.get(t).allowed(e),_d=(e,t,a)=>Hd.get(a).costTransform(e,t),zd=e=>Hd.get(e).cost(),Ed=({wigMakerLevel:e})=>Fd[e],Od=(e,t,a)=>({...Dd.get(a)(e,t),wigs:e.wigs+t,wigsMade:e.wigsMade+t}),Ud=(e,t)=>Hd.get(t).resourceMax(e);var qd={};e(qd,"allowed",(function(){return Vd})),e(qd,"costTransform",(function(){return jd})),e(qd,"cost",(function(){return Qd})),e(qd,"duration",(function(){return Jd})),e(qd,"madeTransform",(function(){return Kd})),e(qd,"resourceMax",(function(){return Yd}));const Gd=[2,1,.5,.2].map((e=>1e3*e)),Vd=({nylon:e})=>e>=1,jd=({nylon:e},t)=>({nylon:e-1*t}),Qd=()=>"1 nylon",Jd=({wigCapMakerLevel:e})=>Gd[e],Kd=(e,t)=>({wigCaps:e.wigCaps+t}),Yd=({nylon:e})=>Math.floor(e/1);var Zd={};e(Zd,"allowed",(function(){return Xd})),e(Zd,"costTransform",(function(){return eu})),e(Zd,"cost",(function(){return tu})),e(Zd,"duration",(function(){return au})),e(Zd,"madeTransform",(function(){return iu})),e(Zd,"resourceMax",(function(){return nu}));const Xd=({nylon:e})=>e>=1,eu=({nylon:e},t)=>({nylon:e-1*t}),tu=()=>"1 nylon",au=()=>100,iu=(e,t)=>({wiglets:e.wiglets+t}),nu=({nylon:e})=>Math.floor(e/1);var ru={};e(ru,"allowed",(function(){return Su})),e(ru,"costTransform",(function(){return Cu})),e(ru,"cost",(function(){return ku})),e(ru,"duration",(function(){return Iu})),e(ru,"madeTransform",(function(){return Au})),e(ru,"resourceMax",(function(){return Bu}));var ou={};e(ou,"allowed",(function(){return su})),e(ou,"costTransform",(function(){return lu})),e(ou,"cost",(function(){return cu})),e(ou,"resourceMax",(function(){return du}));const su=({silicon:e})=>e>=50,lu=(e,t)=>{const a=50*t;let{silicon:i,cash:n}=e;if(Ke(e.autoSilicon)&&a>i){const t=Md(e,a-e.silicon);i=t.silicon,n=t.cash}return{silicon:i-a,cash:n}},cu=()=>"50 silicon",du=e=>Math.floor((e.silicon+Sd(e))/50);var uu={};e(uu,"allowed",(function(){return wu})),e(uu,"costTransform",(function(){return fu})),e(uu,"cost",(function(){return yu})),e(uu,"resourceMax",(function(){return bu}));const gu=new zn;let mu=0;const hu=({algae:e},t=1)=>(gu.increment(t),{algae:e-t}),pu=({algae:e,autoPutty:t})=>Ke(t)?e:0,wu=({silicon:e,hair:t,algae:a})=>e>=5&&t>=6&&a>=3,fu=(e,t)=>{const a=5*t,i=3*t,n=6*t;let{silicon:r,cash:o}=e;if(Ke(e.autoSilicon)&&a>r){const t=Md(e,a-e.silicon);r=t.silicon,o=t.cash}if(!Ke(e.autoPutty))throw new Error("Auto putty is off, cannot apply cost");const{algae:s}=hu(e,i);return{silicon:r-a,cash:o,algae:s,hair:e.hair-n}},yu=()=>"3 putty, 5 silicon, 6 hair",bu=e=>Math.floor(Math.min(e.hair/6,(e.silicon+Sd(e))/5,pu(e)/3)),vu=new Map([[on.micro,ou],[on.microBio,uu]]),Mu=new Map([[on.micro,(e,t)=>({micro:e.micro+t})],[on.microBio,(e,t)=>({microBio:e.microBio+t})]]),Su=(e,t)=>vu.get(t).allowed(e),Cu=(e,t,a)=>vu.get(a).costTransform(e,t),ku=e=>vu.get(e).cost(),Iu=()=>35e3,Au=(e,t,a)=>({...Mu.get(a)(e,t)}),Bu=(e,t)=>vu.get(t).resourceMax(e);var Tu={};e(Tu,"allowed",(function(){return Nu})),e(Tu,"costTransform",(function(){return Pu})),e(Tu,"cost",(function(){return xu})),e(Tu,"duration",(function(){return Wu})),e(Tu,"madeTransform",(function(){return Lu})),e(Tu,"resourceMax",(function(){return Ru}));const Nu=({silicon:e,algae:t})=>e>=2&&t>=1,Pu=(e,t)=>{const a=2*t,i=1*t;let{silicon:n,cash:r}=e;if(Ke(e.autoSilicon)&&a>n){const t=Md(e,a-n);n=t.silicon,r=t.cash}if(!Ke(e.autoPutty))throw new Error("Auto putty is off, cannot apply cost");const{algae:o}=hu(e,i);return{silicon:n-a,cash:r,algae:o}},xu=()=>"1 putty, 2 silicon",Wu=()=>500,Lu=(e,t)=>({smartChips:e.smartChips+t}),Ru=e=>Math.floor(Math.min((e.silicon+Sd(e))/2,pu(e)/1));var Fu=e=>{return Tl({class:"createHandmade"},Gl((t=e.handmadeId,ed[t]),rd.allowed(e,on.hair),id,4e3,e.handmadeRemaining));var t};const Hu=[{cost:2,quantity:20},{cost:5,quantity:80},{cost:8,quantity:320},{cost:13,quantity:2650},{cost:84,quantity:5e4}],Du=({cash:e,buyLevel:t})=>e>=Hu[t].cost,$u=new ee((e=>{const t=`+${j(Hu[e].quantity)}`,a=U(Hu[e].cost);return X(t,a)})),_u=e=>[{...e,nylon:e.nylon+Hu[e.buyLevel].quantity,cash:e.cash-Hu[e.buyLevel].cost},vt(it)],zu=()=>Lt(Du,_u),Eu=[{cost:1,quantity:2},{cost:10,quantity:10},{cost:25,quantity:80},{cost:55,quantity:1360},{cost:85,quantity:7200}],Ou=({cash:e,buyLevel:t})=>e>=Eu[t].cost,Uu=new ee((e=>{const t=`+${j(Eu[e].quantity)}`,a=U(Eu[e].cost);return X(t,a)})),qu=e=>[{...e,wigCaps:e.wigCaps+Eu[e.buyLevel].quantity,cash:e.cash-Eu[e.buyLevel].cost},vt(it)],Gu=()=>Lt(Ou,qu),Vu=(e,t,a)=>ac([ic(S(e)),ic(S(null!=t?j(t):"-")),ic({class:"flexRow"},null!=a?a:[])]),ju=e=>Vu("Hair",e.hair,Ul((e=>so.get(e.buyLevel))(e),co,oo(e))),Qu=e=>Vu("Wig caps",e.wigCaps,Ul((e=>Uu.get(e.buyLevel))(e),Gu,Ou(e))),Ju=e=>ge.has(e.achieved,he.wigCap1)&&Vu("Nylon",e.nylon,Ul((e=>$u.get(e.buyLevel))(e),zu,Du(e))),Ku=e=>(ge.has(e.achieved,he.siliconeWigs)||e.silicon>0)&&Vu("Silicon",e.silicon,[Ul(vd(e),kd,yd(e)),Ol("AutoSilicon",e.autoSilicon,Id)]),Yu=e=>ge.has(e.achieved,pe.algaeIncubator)&&Vu("Algae",e.algae),Zu=e=>Je(e.autoPutty)&&Vu("Synaptic putty",void 0,S(Ke(e.autoPutty)?"Enhanced on-demand":"Enhancer off")),Xu=e=>Vu("Wigs",e.wigs),eg=e=>ge.has(e.achieved,he.wiglets)&&Vu("Wiglets",e.wiglets),tg=e=>ge.has(e.achieved,pe.smartWigs)&&Vu("Smart chips",e.smartChips),ag=e=>ge.has(e.achieved,pe.microCompute)&&Vu("Micro compute",e.micro),ig=e=>ge.has(e.achieved,pe.microBio)&&Vu("Micro+bio",e.microBio);var ng=e=>ge.has(e.achieved,me.manufacture)&&Fl("Stores",[tc("stores",[ju(e),Qu(e),Ju(e),Ku(e),Yu(e),Zu(e),Xu(e),eg(e),tg(e),ag(e),ig(e)])]),rg=(e,{id:t,milestones:a,trigger:i})=>!ge.has(e.achieved,t)&&(void 0===i||i(e))&&ge.hasAll(e.achieved,a);const og=(e,t,a)=>t.id!==e.researchId&&(0!==t.remaining||a.allowed(e)),sg=(e,{id:t,duration:a,allowCost:i})=>[{...e,strandsOn:!1,researchId:t,research:e.research.map((e=>e.id===t?{...e,remaining:a}:e)),...Oa(e,i)},vt(it)],lg=(e,t)=>{const{id:a}=t;if(a===e.researchId)return e;return 0===e.research.find((e=>e.id===a)).remaining?t.allowed(e)?[sg,t]:e:{...e,strandsOn:!1,researchId:a}},cg=(e,t)=>[{...e,researchId:null,research:e.research.filter((e=>e.id!==t.id))},Js(t),vt(ct)],dg=e=>[{...e,strandsOn:!0,researchId:null},vt(it)],ug=new ee((e=>j(e))),gg=({strands:e})=>ug.get(Math.floor(e));var mg=e=>{return t="Notions",a=[0===e.research.length?Tl(kl("No new ideas")):Pl({class:"notionsList"},e.research.map((t=>((e,t,a,i)=>{return xl(t.id,[Tl({class:"notionImageContainer"},(n=t.id,Hl("0 0 24 24",{class:"notionImage",ariaHidden:!0},vc.get(n)))),C("h3",{},[C("span",{class:"textBold"},S(a.title)),kl(`(${a.cost})`)]),Tl(S(a.description)),Tl({class:"notionButtonContainer"},Gl("Ponder",og(e,t,a),[lg,a],a.duration,i?t.remaining:0))]);var n})(e,t,Vs.getById(t.id),t.id===e.researchId)))),Wl([Ul("Contemplate",dg,!e.strandsOn),kl(`Strands: ${gg(e)}`)])],Tl({class:["panel","panelNotions"]},[Rl(t),Tl({class:"panelBody"},a)]);var t,a};let hg,pg=0,wg=null,fg=null,yg=null;const bg=e=>{let{wigMakerSubtype:t}=e;return hg!==e.achieved&&(hg=e.achieved,yg=null,pg=0,wg=t),null!==wg&&wg!==t?pg=60:pg-=1,pg<=0&&(null!==yg?(yg+=1,t=fg[yg],yg===fg.length-1&&(yg=null)):(fg=(({orders:[e,t,a,i,n],wigsHair:r,wigsNylon:o,wigsSilicone:s,wigsAlgae:l,wigsSmart:c})=>{let d=[{subtype:on.hair,orders:Math.max(0,e-r)},{subtype:on.nylon,orders:Math.max(0,t-o)},{subtype:on.silicone,orders:Math.max(0,a-s)},{subtype:on.algae,orders:Math.max(0,i-l)},{subtype:on.smart,orders:Math.max(0,n-c)}].filter((e=>e.orders>100));return d=d.sort(((e,t)=>t.orders-e.orders)),d.map((e=>e.subtype))})(e),fg.length>0?(t=fg[0],fg.length>1&&(yg=0)):t=(({achieved:e})=>ge.has(e,pe.smartWigs)?on.smart:ge.has(e,pe.algaeIncubator)?on.algae:on.silicone)(e)),pg=t===on.algae?10:3),wg=t,t},vg=(e,t)=>[{...e,wigMakerSubtype:t},vt(it)],Mg=(e,t)=>Nl({class:{machineryButton:!0,machineryButtonOff:!e,machineryButtonOn:e},onclick:t},e?Hl("0 0 24 24",{"aria-label":"on"},hc):S("0")),Sg=(e,t,a)=>Tl({class:"machineryProgress"},Hl("0 0 100 100",{preserveAspectRatio:"none",class:{machineryProgressbar:!0,machineryProgressbarBoosted:a},style:{transform:`scaleX(${Math.min(1,t/e)})`}},_l(0,0,100,100))),Cg=(e,{allocated:t,progress:a},i,n,r)=>xl(e,[Mg(0!==t,0===t?[Pa,e]:[xa,e]),Tl(i),Sg(n,a,r)]),kg=(e,t)=>ql(e,[vg,t||on.hair],!0,{class:["actionButton","machineryWigSwitch"]}),Ig=new Map([[on.hair,()=>kg(Al("Hair wig",zd(on.hair)),on.nylon)],[on.nylon,()=>kg(Al("Nylon wig",zd(on.nylon)),on.hair)]]);const Ag=new ee((e=>Math.floor((47.7*(e+1))**1.8-150.9*e))),Bg=e=>25+.45*e,Tg=(e,t)=>t>=Math.floor(e/24),Ng=({fabricators:e,fabricatorHyper:t,micro:a,microBio:i})=>!Tg(e,t)&&a+i>=Ag.get(t),Pg=new ee(((e,t)=>{if(Tg(t,e))return"(maxed)";const a=`+${q(Bg(e))} per 24 fabs`,i=`${j(Ag.get(e))} micro`;return X(a,i)})),xg=({fabricatorHyper:e,fabricators:t})=>Pg.getFor2(e,t),Wg=e=>[{...e,...Ea(e.micro,e.microBio,Ag.get(e.fabricatorHyper)),fabricatorHyper:e.fabricatorHyper+1,fabricatorMultiplier:e.fabricatorMultiplier+Bg(e.fabricatorHyper)},vt(it)],Lg=()=>Lt(Ng,Wg),Rg=(e,t)=>t>0&&0!==e&&e<.1?`<${Q(.1)}/s`:e<100?`${Q(e)}/s`:e<1e4?`${J(e)}/s`:`${Y(e)}/s`,Fg=(e,t,{rate:a,allocated:i,starved:n},r)=>{return ac({key:e},[ic(t),ic({class:["fabricationStalledIcon",n&&i>0&&"fabricationStalledIconShow"]},Hl("0 0 24 24",o,pc)),ic(S(Rg(a,i))),ic({class:"allocationButtonCell"},ql(Cc({class:"allocationChangeIcon"}),[xa,e],i>0,{"aria-label":"Decrease allocation"})),ic(kl(i)),ic({class:"allocationButtonCell"},ql(Sc({class:"allocationChangeIcon"}),[Pa,e],r>0,{"aria-label":"Increase allocation"}))]);var o},Hg=(e,t)=>ql(e,[vg,t||on.hair],!0,{class:["actionButton","machineryWigSwitch"]}),Dg=new Map([[he.nylonWigs,on.nylon],[he.siliconeWigs,on.silicone],[pe.algaeIncubator,on.algae],[pe.smartWigs,on.smart]]),$g=(e,t)=>ge.has(e,t)?Dg.get(t):on.hair,_g=new Map([[on.hair,e=>Hg(Al("Hair wig",rd.cost(on.hair)),$g(e,he.nylonWigs))],[on.nylon,e=>Hg(Al("Nylon wig",rd.cost(on.nylon)),$g(e,he.siliconeWigs))],[on.silicone,e=>Hg(Al("Silicone wig",rd.cost(on.silicone)),$g(e,pe.algaeIncubator))],[on.algae,e=>Hg(Al("Algae wig",rd.cost(on.algae)),$g(e,pe.smartWigs))],[on.smart,()=>Hg(Al("Smart wig",rd.cost(on.smart)),on.hair)]]),zg=(e,t)=>(t||e.lowPower)&&Wl(t?Bc:Tc),Eg=({fabricators:e,fabricatorActionQuantity:t})=>(e=>e>=50)(e)&&Ul(`${t}x`,[La,Wa(e,t)],!0,{"aria-label":`Currently set to adjust in multiples of ${t}`});const Og=(e,t)=>Ul(q(t),[qo,t],e!==t);var Ug=e=>ge.has(e.achieved,pe.algaeIncubator)&&Fl("Algae incubator",[Wl([Il(`Pool size: ${zo(e)}/${_o(e)}`),Ul(Do(e),Uo,Fo(e))]),Tl(S(`Growth effectiveness: ${Eo(e)}`)),Wl([Cl(S("Harvest:")),Wl([Og(e.algaeHarvest,.1),Og(e.algaeHarvest,.25),Og(e.algaeHarvest,.5),Og(e.algaeHarvest,.75),Og(e.algaeHarvest,.9)])]),ge.has(e.achieved,pe.smartWigs)&&Wl([Tl(Ol("Synapse enhancer",e.autoPutty,Go)),0===e.puttyEnhanced?S("Idle"):S(`${J(e.puttyEnhanced)}/s`)])]);const qg=e=>Tl([Cl([Bl(e.lowPower&&"lowPower",`${ca(e)}`),S(` demand, ${sa(e)} supply`)]),Cl(Gl("Boost",Rt(e),Dt,8e3,e.boostRemaining))]),Gg=e=>Ul(ia(e,Et),ma,Zt(e,Et)),Vg=e=>Ul(ia(e,Ot),ha,Zt(e,Ot)),jg=e=>Ul(ia(e,Ut),pa,Zt(e,Ut)),Qg=e=>{switch(e){case zt:case Et:return["powerCell","powerCellGrid"];case Ot:return["powerCell","powerCellSolar"];case Ut:return["powerCell","powerCellWind"];default:throw new Error(`Supply id fail ${e}`)}},Jg=e=>Tl({class:"powerCells"},e.powerSupply.map((e=>{return Bl(Qg(t=e),Jt(t));var t}))),Kg=(e,t)=>e.filter((e=>e===t)).length,Yg=(e,t,a)=>ac([ic({class:Qg(t)},S(Jt(t))),ic(S(`${Kg(e.powerSupply,t)} @ ${q(Xt(e,t))}`)),ic(a(e))]),Zg=Tl({class:"powerVoid"},S("Void"));var Xg=e=>ge.has(e.achieved,he.power)&&Fl("Power",(e=>{const{powerSupply:t}=e;return t[0]===qt?Zg:t.length<15?[qg(e),Jg(e),Wl([Gg(e),Vg(e),jg(e)])]:[qg(e),tc("powerTypeBasedLayout",[Yg(e,Et,Gg),Yg(e,Ot,Vg),Yg(e,Ut,jg)])]})(e));const em=e=>{return t={key:e,class:"researchLight"},C("circle",{cx:30*(e-.5),cy:15,r:12,...t});var t},tm=Tl({class:"researchLightContainer"},Hl("0 0 90 30",void 0,[em(1),em(2),em(3)]));var am=e=>{return t="Research",a=!e.lowPower&&tm,i=[0===e.research.length?Tl(kl("None available")):Pl({class:"researchList"},e.research.map((t=>((e,t,a)=>{return xl(t.id,[C("h3",{class:"textBold"},S(a.title)),Ul("Research",[lg,a],og(e,t,a)),kl(a.cost),0!==t.remaining&&(n=t.remaining,i=O.format(new Date(n)),C("span",{class:"alignRight"},S(i))),Tl({class:"researchDescriptionContainer"},S(a.description))]);var i,n})(e,t,Vs.getById(t.id))))),Wl([Ul("Contemplate",dg,!e.strandsOn),kl(`Strands: ${gg(e)}`),Ll(e.lowPower&&Ac)])],Tl({class:["panel","panelResearch"]},[Tl({class:["panelHeader","flexRow"]},[C("h3",{},S(t)),Ll(a)]),Tl({class:"panelBody"},i)]);var t,a,i};const im=e=>ge.has(e.achieved,he.research)?am(e):ge.has(e.achieved,me.notions)?mg(e):void 0,nm=e=>ge.has(e.achieved,he.fabricator)?(e=>Fl("Fabrication",[tc("fabricationTable",[Fg(en,_g.get(e.wigMakerSubtype)(e.achieved),e.fabricating[en],e.fabricatorsUnallocated),Fg(tn,Al("Wig cap",qd.cost()),e.fabricating[tn],e.fabricatorsUnallocated),ge.has(e.achieved,he.wiglets)&&Fg(an,Al("Wiglet",Zd.cost()),e.fabricating[an],e.fabricatorsUnallocated),ge.has(e.achieved,pe.microCompute)&&!ge.has(e.achieved,pe.microBio)&&Fg(nn,Al("Micro compute",ru.cost(on.micro)),e.fabricating[nn],e.fabricatorsUnallocated),ge.has(e.achieved,pe.microBio)&&Fg(nn,Al("Micro+bio",ru.cost(on.microBio)),e.fabricating[nn],e.fabricatorsUnallocated),ge.has(e.achieved,pe.smartWigs)&&Fg(rn,Al("Smart chip",Tu.cost()),e.fabricating[rn],e.fabricatorsUnallocated)]),Wl([kl(`Fabricators: ${e.fabricators}`),Eg(e),Ul(Ba(e),Na,Ia(e)),zg(e,Ft(e))]),ge.has(e.achieved,pe.hyperFab)&&Wl([kl(`hyperFabs: ${e.fabricatorHyper}`),Ul(xg(e),Lg,Ng(e))]),e.fabricatorMultiplier>1&&Tl(S(`${q(e.fabricatorMultiplier)} efficiency`))]))(e):ge.has(e.achieved,me.autoMaker)?(e=>Fl("Machinery",[Pl({class:"machineryList"},[ge.has(e.achieved,he.wigs1)&&Cg(en,e.fabricating[en],ge.has(e.achieved,he.nylonWigs)?Ig.get(e.wigMakerSubtype)():Al("Wig",zd(on.hair)),Ed(e),Ft(e)),ge.has(e.achieved,he.wigCap1)&&Cg(tn,e.fabricating[tn],Al("Wig cap",Qd()),Jd(e),Ft(e))])]))(e):void 0;var rm=e=>(e.navSelected===Ct||!$s())&&Ql([Jl([Fu(e),nm(e),Xg(e),Ug(e),El(e)]),Kl([ng(e),im(e),El(e)])]);const om=["Milliners adorn hardhats as safety concerns raised over hat wearing","Red tape slashed for wig manufacturers","Baseball caps banned in public places","Trouble in Panama, hats banned","Mandatory wigs for all loiterers","Hairspray linked to hair loss","No hair in face whilst driving","Wig popularity “here to stay” says official","Police give out hair clips to long haired drivers","Bold parents send kids to school in wigs","Politician apologises for not wearing wig during interview","New research data favours wigs","Airline declares wigs safe for pilots","Politicians agree landmark push for wig wearing","Schools told to include hair hygiene in curriculum","Wig ownership rockets forward","Government opens first wig recycling plant","Committee formed to promote benefits of wigs","Swimming pools to offer wig hooks","Wig statue unveiled","No where to grow; short hair mandatory across public services","Hockey team iced for not wearing wigs","Regulations loosen in favor of wig makers","Mayor orders Wig Celebration Day","Competition laws no longer a problem","Border police turn away couple without wigs","Health benefits of hair over wigs disproved","Wow factor for wigs","Chaos at shopping center as wigs become must have item","Train company makes wigs mandatory part of uniform","Crisis time for hat makers","Prohibited: hats when driving","Politician denies accepting bribe from wig manufacturer","Government sues maker of “dangerous berets”","Milliner files for bankruptcy","Doubts over wigs brushed under the carpet","Time running out for hat makers","Giant inflatable wigs fly high at city festival","Wigs dominate political agenda","Anti-trust enquiry falls on deaf ears","Wig advocate cleared of all charges","Wigs now worn by 95% of politicians","Hazardous waste problem washed away","Wig protesting outlawed","New law bans hat wearing in public"].map(((e,t)=>se(`7${Yc(t)}`,e))),sm=e=>e>=om.length,lm=new ee((e=>{let t=1;return e>=37?t=1+e/5*39:e>=27?t=1+e/5*29:e>=20?t=1+e/5*21:e>=5&&(t=1+e/5*3.8),N(Math.log(e+2)**(.101*e)*16e4*t)})),cm=({bribes:e,cash:t})=>!sm(e)&&t>=lm.get(e),dm=new ee((e=>{if(sm(e))return"(maxed)";const t=U(lm.get(e));return X("+1",t)})),um=({bribes:e})=>dm.get(e),gm=e=>{return[{...e,bribes:e.bribes+1,cash:e.cash-lm.get(e.bribes),brand:e.brand+(t=e.bribes,1e4*(t+1)),...ce(e,om[e.bribes])},vt(it)];var t},mm=()=>Lt(cm,gm);var hm=e=>ge.has(e.achieved,me.bribes)&&Tl([Il(`Bribed politicians: ${e.bribes}`),Ul(um(e),mm,cm(e))]),pm=e=>ge.has(e.achieved,me.vogue)&&Tl([Il(`Vogue: ${Za(e)}/${Ya(e)}`),Ul("Increase brand",Qa,Va(e))]);const wm=e=>({...e,marketForcesAltView:Ye(e.marketForcesAltView)}),fm=e=>{return 0===e?0:e<99999?j(e):(t=e,E.format(t));var t},ym=(e,t,a,i)=>ac([ic(S(e)),ic(S(fm(t))),ic(S("-"===a?"-":fm(a))),ic(S(i))]),bm=({achieved:e,wigsHair:t,wigsNylon:a,wigsSilicone:i,wigsAlgae:n,wigsSmart:r,wiglets:o,orders:[s,l,c,d,u]},g)=>tc("orders",[ac([nc(),nc(S("Stock")),nc(S("Orders")),nc(S("Unit Price"))]),ym("Hair",t,s,g.wigHairText),ge.has(e,he.nylonWigs)&&ym("Nylon",a,l,g.wigNylonText),ge.has(e,he.siliconeWigs)&&ym("Silicone",i,c,g.wigSiliconeText),ge.has(e,pe.algaeIncubator)&&ym("Algae",n,d,g.wigAlgaeText),ge.has(e,pe.smartWigs)&&ym("Smart",r,u,g.wigSmartText),ge.has(e,he.wiglets)&&ym("Wiglet",o,"-",g.wigletText)]),vm=({wigsSmart:e,achieved:t,orders:[,,,,a],smartWigsFulfillment:i,wiglets:n})=>C("fieldset",{class:"ordersAltViewContainer"},[C("legend",{},S("Smart wigs")),tc("ordersAltView",[ac([nc(S("Stock")),C("td",{},S(j(e)))]),ac([nc(S("Orders")),ic(S(j(a)))])]),Tl(S(`Stock vs orders: ${ge.has(t,pe.demandLinking)?"demand linked":q(i)}`)),Tl(S(`Wiglets: ${j(n)}`))]),Mm=e=>{return Je(e.marketForcesAltView)&&Tl({class:"ordersViewSwitchContainer"},Nl({class:"ordersViewSwitch",onclick:wm},Hl("0 0 24 24",t,wc)));var t};var Sm=e=>Fl("Forces",[Ke(e.marketForcesAltView)?vm(e):bm(e,$n(e)),Mm(e),Sl(),Tl([S(`Brand value: ${j(e.brand)} (+${e.brandMultiplier} per sale)`)]),pm(e),hm(e)]);const Cm=(e,t,a)=>{if(null!==e.campaignRunning)return e;const{allowCash:i}=Vs.getById(t);return e.cash<i?e:[{...e,campaignRunning:{id:t,progress:0,brandIncrease:0,complete:!1},cash:e.cash-i},!a&&vt(it)]},km=(e,t)=>null!==e.campaignRunning&&e.campaignRunning.complete?[{...e,campaignRunning:null,brand:e.brand+Math.floor(e.campaignRunning.brandIncrease),campaigns:e.campaigns.filter((t=>t.id!==e.campaignRunning.id)),campaignUpliftIteration:e.campaignUpliftIteration+(void 0===e.campaignRunning.uplifted?0:1)},Js(Vs.getById(e.campaignRunning.id)),!t&&vt(it)]:e,Im=new ee((e=>Math.floor(30*Math.exp(e/3)))),Am=({campaignUpliftIteration:e})=>X("Uplift modelling",`${Im.get(e)} micro`),Bm=({campaignRunning:{progress:e,uplifted:t}},a)=>{if(void 0!==t)return t;const i=e/a.duration*100;return 1+Math.min(50,Math.floor(62*(1/Math.abs(25-i+1))**.3))/100},Tm=(e,t)=>[{...e,...Ea(e.micro,e.microBio,Im.get(e.campaignUpliftIteration)),campaignRunning:{...e.campaignRunning,uplifted:t?1.5:Bm(e,Vs.getById(e.campaignRunning.id))}},!t&&vt(it)],Nm=({campaignRunning:e,campaignUpliftIteration:t,micro:a,microBio:i})=>null!==e&&!e.complete&&void 0===e.uplifted&&a+i>=Im.get(t),Pm=(e,t)=>Lt(Nm,Tm,t),xm=e=>[{...e,autoCampaign:Ye(e.autoCampaign)},vt(nt)],Wm=[...Array(15).keys()].map((e=>.1*e)),Lm=e=>Wm.map((t=>((e,t)=>C("div",{key:e,"aria-hidden":"true",class:{campaignProgressBarIncrement:!0,campaignProgressBarFilled:t>e,campaignProgressBarFilledCurrent:t>e&&t<e+.1}}))(t,e))),Rm=(e,{id:t},a,i,n)=>xl(t,i?((e,{title:t,duration:a},{progress:i,brandIncrease:n,complete:r,uplifted:o})=>{return[Tl({class:"campaignsBet"},[]),kl(t),Tl({class:"campaignsProgress"},(s=i/a,Tl({class:"campaignProgressBar",role:"progressbar","aria-valuenow":q(s),"aria-valuemin":q("0"),"aria-valuemax":q(s>1?1.5:1)},Lm(s)))),Wl([kl(`Brand opportunity: ${Y(n)}`),Tl({class:"campaignsRealize"},Ul("Realize",km,r))]),ge.has(e.achieved,pe.microCompute)&&(o?Tl({class:"marginTopHalf"},[kl("Uplift projection:"),Bl("campaignUpliftPercent",q(o-1))]):Tl(Ul(Am(e),Pm,Nm(e))))];var s})(e,a,n):(({id:e,title:t,cost:a},i)=>[Tl({class:"campaignsBet"},Ul("Start",[Cm,e],i)),Al(t,a)])(a,((e,t)=>null===e.campaignRunning&&e.cash>=t.allowCash)(e,a)));var Fm,Hm=e=>Fl("Campaigns",[Je(e.autoCampaign)&&Tl({class:"marginTop"},Ol("Campaign Manager",e.autoCampaign,xm)),0===e.campaigns.length?Tl(kl("None available")):Pl({class:"campaignsList"},e.campaigns.map((t=>{var a;return Rm(e,t,Vs.getById(t.id),(null===(a=e.campaignRunning)||void 0===a?void 0:a.id)===t.id,null!==(Fm=e.campaignRunning)&&void 0!==Fm?Fm:{})})))]);const Dm=[$l("m0.9494 21.665c0.38405 0.48182 0.95036 0.80203 1.5504 0.9421s1.232 0.10778 1.8319-0.03275c1.206-0.28251 2.3076-1.0172 2.9989-2.045 0.85348-1.2689 1.0447-2.883 0.90593-4.4059-0.13879-1.5229-0.57842-2.9998-0.88906-4.4972-0.31065-1.4974-0.49066-3.0645-0.11074-4.5458 0.18996-0.74065 0.52162-1.4504 1.0097-2.0389 0.48811-0.58856 1.1367-1.052 1.8683-1.2742 0.85067-0.2583 1.7886-0.17988 2.6099 0.16048 0.82129 0.34037 1.5271 0.93287 2.0562 1.6473 1.0583 1.4288 1.3938 3.2766 1.3912 5.0546-0.0026 1.7484-0.30106 3.4875-0.28255 5.2358 0.0093 0.87416 0.09892 1.7522 0.34026 2.5924 0.24133 0.84024 0.63866 1.6435 1.2178 2.2983 0.71185 0.80482 1.7152 1.3727 2.7862 1.4586 0.53551 0.04299 1.082-0.03406 1.5794-0.23706 0.4974-0.20299 0.94436-0.53292 1.2736-0.95748 0.41153-0.53076 0.63254-1.2273 0.51134-1.8878-0.0606-0.33029-0.20561-0.64631-0.42582-0.89983s-0.51615-0.44272-0.84182-0.52461c-0.23817-0.05988-0.49116-0.06226-0.72931-0.0023-0.23816 0.05994-0.46086 0.18254-0.63564 0.35506-0.17479 0.17251-0.30076 0.39483-0.35441 0.63448-0.05366 0.23965-0.03416 0.49584 0.05939 0.72291 0.09573 0.23235 0.26285 0.42659 0.40219 0.63572 0.06967 0.10457 0.13307 0.21421 0.17613 0.33225s0.06527 0.24521 0.05117 0.37007c-0.01233 0.10914-0.05243 0.21469-0.1133 0.30611s-0.14225 0.16874-0.23514 0.22734c-0.18579 0.11719-0.41464 0.15712-0.63284 0.13174-0.21819-0.02538-0.42612-0.11307-0.61018-0.23295-0.18407-0.11988-0.34564-0.27138-0.49523-0.43224-0.88955-0.95657-1.3606-2.2462-1.5167-3.5431-0.15606-1.2969-0.01825-2.6111 0.17986-3.9022 0.1981-1.2912 0.4568-2.576 0.54413-3.8793s-0.0035-2.6413-0.48287-3.8564c-0.40143-1.0175-1.0715-1.9257-1.9162-2.6206s-1.8613-1.1765-2.9312-1.404c-2.1398-0.45501-4.4565 0.14354-6.177 1.4947-1.7205 1.3512-2.8391 3.4126-3.1444 5.5788-0.30526 2.1662 0.18245 4.4178 1.2596 6.3219 0.37811 0.66836 0.82604 1.296 1.1879 1.9733 0.36188 0.67728 0.63937 1.4213 0.63734 2.1892-0.00102 0.38395-0.07339 0.76979-0.23181 1.1195-0.15842 0.34974-0.40464 0.66233-0.72033 0.88087s-0.7016 0.33978-1.085 0.31992c-0.38343-0.019868-0.76123-0.18504-1.0214-0.46743-0.23726-0.25754-0.36731-0.59337-0.49114-0.92091-0.12383-0.32755-0.25165-0.66382-0.4858-0.92419-0.17731-0.19717-0.41161-0.34249-0.66703-0.41372-0.25542-0.071234-0.53111-0.06814-0.78487 0.008809-1.263 0.41023-0.8011 2.1525-0.41695 2.9536z"),$l("m7.366 19.001c-0.13867-1.7215-0.045232-3.4616 0.27698-5.1583 0.27833-1.4657 0.74521-2.9341 1.6683-4.1061 0.46157-0.58598 1.0347-1.0896 1.6971-1.4326 0.66237-0.34304 1.4156-0.52151 2.1596-0.46794 0.7003 0.05042 1.3799 0.3052 1.9626 0.69683 0.58274 0.39163 1.0702 0.91717 1.4498 1.5078 0.75913 1.1813 1.0798 2.5948 1.2075 3.9932 0.14476 1.5858 0.05744 3.1927-0.25833 4.7535l4.1557 0.08183c0.78294-1.9736 0.88343-4.2107 0.2806-6.2466s-1.9051-3.8576-3.6364-5.0867c-2.5838-1.8344-6.1012-2.2628-9.0568-1.12s-5.2655 3.8163-5.9859 6.9022c-0.42782 1.8325-0.31559 3.7877 0.31911 5.5592z"),$l("m12.125 12.084c1.2909 0.25277 2.5065 0.87871 3.4621 1.7827s1.648 2.083 1.9719 3.358l3.2693 1.2731c1.0777-1.9405 1.4768-4.2495 1.1132-6.4392-0.36367-2.1897-1.4877-4.2457-3.1348-5.7337-1.7607-1.5906-4.1079-2.5167-6.4804-2.5567-2.3724-0.040027-4.7496 0.80633-6.5629 2.3367s-3.0472 3.7314-3.4065 6.0768c-0.3593 2.3454 0.15907 4.8149 1.4311 6.8179-0.015513-2.0649 0.93893-4.1167 2.5283-5.4351 1.5893-1.3184 3.7821-1.8772 5.8086-1.4805z"),$l("m2.9588 15.277c-0.44015-0.109-0.8495-0.33673-1.1785-0.6488s-0.57732-0.7074-0.72152-1.1373c-0.2884-0.8598-0.14222-1.8442 0.34578-2.6085 0.49911-0.78178 1.3067-1.3137 2.1349-1.7312 2.5332-1.2769 5.4691-1.6816 8.281-1.3063 2.8119 0.37526 5.4983 1.5099 7.8315 3.1236 0.96066 0.66442 1.8771 1.4225 2.547 2.3793s1.0776 2.1352 0.94097 3.2952c-0.06832 0.58001-0.27308 1.1467-0.613 1.6216-0.33991 0.47491-0.81677 0.85512-1.3649 1.0567s-1.1663 0.21938-1.7173 0.02562c-0.55094-0.19376-1.0278-0.60262-1.2812-1.1288-0.20361-0.42281-0.26077-0.90356-0.24327-1.3725 0.0175-0.46896 0.10625-0.93186 0.18146-1.3951 0.07522-0.46322 0.13725-0.9329 0.10078-1.4008-0.036472-0.46787-0.17816-0.9383-0.47288-1.3035-0.26724-0.33116-0.64892-0.55987-1.0567-0.68141-0.40781-0.12154-0.84125-0.14037-1.2648-0.09879-0.847 0.08317-1.6511 0.40061-2.48 0.59382-0.78411 0.18279-1.5887 0.25689-2.3858 0.37098-0.79701 0.1141-1.59 0.275-2.3495 0.5422-0.7595 0.2672-1.4752 0.64299-2.1838 1.0253s-1.4398 0.78692-2.2427 0.84686c-0.27053 0.02019-0.54424-0.0029-0.80756-0.0681z"),$l("m0.55147 16.399c-0.008516-0.0962-0.004885-0.19304 0-0.28949 0.14559-2.8748 1.4485-5.6729 3.5482-7.6418s4.9717-3.0889 7.8501-3.071c2.8784 0.017863 5.7329 1.171 7.8229 3.1503 2.09 1.9793 3.3957 4.763 3.5915 7.6348 0.01664 0.24408 0.02406 0.49787-0.06998 0.72372-0.05994 0.14396-0.1594 0.26997-0.27945 0.3695-0.12005 0.09953-0.2603 0.17318-0.40736 0.22507-0.29411 0.10378-0.6109 0.12091-0.92268 0.12916-2.8927 0.07653-5.7538-0.52529-8.6221-0.90795-2.8683-0.38267-5.8547-0.53626-8.5924 0.40135-0.73239 0.25083-1.464 0.58215-2.238 0.5669-0.387-0.0076-0.77883-0.10758-1.0957-0.32995-0.15842-0.11118-0.29663-0.25214-0.39917-0.41628s-0.16888-0.35162-0.18595-0.5444z"),$l("m23.367 16.11c0.11244-3.0624-1.0714-6.1515-3.2017-8.3544s-5.1779-3.4896-8.2424-3.4799c-3.0644 0.0097215-6.1039 1.3158-8.2201 3.5321-2.1162 2.2164-3.2805 5.3129-3.1486 8.3745 0.010437 0.24231 0.028653 0.48474 0.06998 0.72372 0.10833 0.62646 0.37799 1.2243 0.77586 1.7202s0.92311 0.88868 1.5112 1.1302c0.5881 0.2415 1.2378 0.3312 1.8694 0.25806 0.63154-0.07314 1.2436-0.30895 1.7609-0.67848 0.51734-0.36953 0.93889-0.87198 1.2129-1.4457 0.27401-0.57368 0.39988-1.2174 0.36216-1.852-0.037719-0.63464-0.23895-1.2589-0.57898-1.7961-0.34003-0.53719-0.81813-0.98617-1.3756-1.2918z"),$l("m21.259 17.894c0.41585 0.01738 0.69451-0.09641 0.9877-0.38444 0.54965-0.32312 0.58698-1.7646 0.65847-2.4028 0.13884-1.2159 0.0059-1.9071-0.41154-2.9794-0.97509-2.7261-2.2389-0.14588-3.7039-0.57666-0.68354-0.26605-0.55394-1.1975-0.82308-1.8261-0.31985-0.74696-1.9425-1.1746-2.5516-1.2494-1.1363-0.17764-2.1769 0.45739-3.1277 0.865-0.93787 0.5431-1.9748 1.225-3.1277 0.48055-1.1573-1.0968 0.23442-4.1044-1.7285-3.7483-3.8113 1.8776 0.97369 4.584-2.2223 4.5172-1.2468-0.91463-2.3575-2.3833-3.0454-3.6522-0.35453-0.33118-1.1755-0.23415-1.3992 0.28833-0.019428 1.8563 0.94482 3.504 1.4816 4.9978 0.41801 1.1715 0.97703 2.2655 1.3169 3.46z"),$l("m17.744 16.843c0.84688 0.33168 1.735 0.65881 2.6406 0.5749 0.54651-0.05063 1.078-0.25447 1.5182-0.58226 0.44022-0.32779 0.78786-0.77857 0.99301-1.2876 0.20516-0.50907 0.26723-1.0749 0.17732-1.6164-0.08992-0.54144-0.33156-1.0569-0.69025-1.4723l-1.0705-4.743-3.283 3.3776-1.7842-5.3897-3.283 4.3118-0.71369-3.5932-2.6406 2.8027-1.5701-3.9525-2.4979 3.0901-1.927-2.9464 0.98241 8.9396c5.2048 3.0577 7.5275 0.28527 13.148 2.4866z"),$l("m4.05 10.428c1.9847-1.4151 4.4519-2.0812 6.8895-2.0755 2.4376 0.00565 4.8465 0.65784 7.0579 1.6832 0.41091 0.19052 0.82216 0.39822 1.1532 0.70729 0.16554 0.15454 0.3095 0.33388 0.41218 0.53572s0.16328 0.42673 0.162 0.65319c-0.0017 0.29218-0.10421 0.57308-0.2022 0.84835-0.09799 0.27526-0.19396 0.55977-0.18167 0.8517 0.01105 0.26252 0.10902 0.51274 0.21009 0.75528 0.10107 0.24254 0.20772 0.48758 0.23776 0.74861 0.03621 0.31465-0.04158 0.63146-0.14445 0.93102-0.10288 0.29956-0.23172 0.59129-0.3034 0.8998-0.12834 0.55239-0.0578 1.1622 0.25592 1.6347 0.27186 0.40941 0.71857 0.69674 1.2027 0.78142 0.4841 0.08468 0.99904-0.03257 1.4029-0.31258 0.40388-0.28001 0.69324-0.71832 0.79917-1.1982 0.10592-0.4799 0.02896-0.99662-0.20582-1.4284-0.14752-0.27129-0.35223-0.5062-0.53807-0.75283-0.18584-0.24662-0.35722-0.51443-0.42161-0.81644-0.06746-0.3164-0.01226-0.64621 0.07183-0.9586s0.19717-0.61812 0.24807-0.9376c0.09454-0.5934-0.03299-1.2085-0.28907-1.7521-0.25608-0.54359-0.63553-1.0211-1.0545-1.4518-1.1988-1.2325-2.742-2.1106-4.3908-2.5983-1.6488-0.48763-3.4001-0.59192-5.108-0.39349-3.4157 0.39685-6.5944 1.975-9.4389 3.9072-0.16512 0.11216-0.33298 0.22908-0.44785 0.39232-0.10634 0.15111-0.16084 0.33456-0.17641 0.51868-0.015576 0.18412 0.00617 0.36962 0.041799 0.55092 0.071268 0.36261 0.19861 0.71861 0.19859 1.0882-1.47e-5 0.26765-0.067155 0.53041-0.14024 0.78788-0.07309 0.25747-0.15299 0.51508-0.17965 0.78139-0.040468 0.40431 0.043275 0.80924 0.11109 1.2099 0.06782 0.40063 0.11944 0.81625 0.016863 1.2094-0.066459 0.25472-0.19483 0.48829-0.29117 0.73327-0.048172 0.12249-0.088557 0.24873-0.10833 0.37886-0.019774 0.13013-0.018482 0.26463 0.015631 0.39176 0.033702 0.1256 0.099322 0.24221 0.1875 0.33779 0.088182 0.09557 0.19865 0.17011 0.31945 0.21826 0.2416 0.0963 0.52103 0.08356 0.76026-0.01847 0.23923-0.10203 0.43806-0.28933 0.57-0.51346 0.13195-0.22412 0.19882-0.48353 0.2101-0.74337 0.018723-0.43115-0.11053-0.85282-0.21145-1.2724-0.10092-0.41959-0.17351-0.86584-0.04446-1.2777 0.1055-0.33668 0.33544-0.6173 0.54954-0.89774 0.2141-0.28044 0.42314-0.58396 0.47412-0.93308 0.030017-0.20558 0.00284-0.41607-0.049679-0.61707-0.052519-0.20101-0.12994-0.39446-0.20242-0.58916s-0.14049-0.39246-0.17305-0.59765c-0.032553-0.20519-0.028293-0.41964 0.041273-0.61541 0.059786-0.16824 0.16581-0.31725 0.29044-0.4451 0.12463-0.12785 0.26794-0.23589 0.41332-0.33954z"),$l("m16.632 11.782c-1.6833-0.86479-6.1957-0.26435-8.4513 0.03579-2.2556 0.30014-2.2556 0.30014-2.292 1.2559-0.03641 0.95578-0.10919 2.8662-0.39154 3.7571s-0.77292 0.76378-1.2642 0.63642c-0.7278-0.14556-2.1753-0.43505-2.1723-0.45421 0.00294-0.01916 2.3538-6.1676 3.2575-7.6603 0.90368-1.4927 10.905 0.25406 13.547 0.85279 2.6428 0.59873 2.1978 4.8428 1.4423 5.8793-0.75547 1.0365-2.0291 0.85459-2.8299 0.85498-0.80076 3.9e-4 -1.1283 0.18234-0.71857-0.89092 0.4097-1.0733 1.556-3.4022-0.12734-4.267z"),$l("m3.7636 18.479c-0.82703 1.1919-2.0687 2.0834-3.1949 2.9181l14.318-2.2638s7.3245 1.2856 7.5712 0.82961c0.79596-1.4711-4.3267-7.976-3.4395-9.5801 0.72302-1.2476 0.64147-1.133 1.3967-2.3348 0.0051-0.0081 0.93909-1.4619 1.0328-1.6175 0.14017-0.23277 0.25838-0.48021 0.40187-0.71084l-17.865 9.4328s-0.022086 3.0397-0.22109 3.3264z"),$l("m12.009 13.974c1.6448-0.59062 3.3738-1.123 5.1113-0.93592 0.86878 0.09354 1.7264 0.37317 2.4412 0.8758 0.71477 0.50263 1.2791 1.2367 1.5087 2.0798 0.08191 0.30076 0.12134 0.61157 0.19704 0.91396 0.0757 0.30238 0.19234 0.60336 0.40339 0.83277 0.18859 0.20499 0.4563 0.34491 0.73485 0.3459 0.13927 4.95e-4 0.27914-0.03367 0.40016-0.10261 0.12102-0.06894 0.22254-0.17299 0.2842-0.29787 0.06851-0.13878 0.08637-0.29919 0.06735-0.45278-0.01903-0.15359-0.07344-0.30107-0.14304-0.4393-0.13921-0.27646-0.33915-0.51962-0.47015-0.80006-0.19858-0.4251-0.22678-0.90896-0.21563-1.378 0.01115-0.46906 0.05816-0.94059-0.0027-1.4058-0.075621-0.5779-0.31882-1.1291-0.67178-1.5929-0.35296-0.46379-0.81336-0.8414-1.3235-1.1232-1.0203-0.56362-2.2153-0.73897-3.3809-0.72501s-2.3205 0.20643-3.4792 0.33355c-1.1587 0.12712-2.3416 0.18784-3.4809-0.058341-1.3229-0.28586-2.5243-0.97099-3.8178-1.3695-0.64674-0.19927-1.3231-0.32673-1.9987-0.28844-0.67565 0.038289-1.3528 0.25107-1.88 0.67543-0.51169 0.41191-0.86216 1.012-0.99827 1.6546-0.13611 0.64263-0.061943 1.3238 0.18194 1.9337 0.24388 0.60994 0.65366 1.1487 1.1575 1.5701 0.50387 0.42144 1.1 0.72723 1.728 0.92001 1.2559 0.38557 2.614 0.31831 3.8979 0.03949 1.2838-0.27882 2.5127-0.76128 3.7491-1.2053z"),$l("m4.3762 14.83c-7.5184-9.1849 0.3968-6.1242 0.3968-6.1242l11.706 2.4059 5.8198 4.9577-0.46294 2.4788-18.253 2e-6z"),$l("m2.4017 11.026c0.69566 0.2957 1.3037 0.80034 1.7076 1.4393 0.40389 0.63895 0.59922 1.4106 0.53041 2.1633-0.01168 0.12778-0.030734 0.25493-0.03733 0.38307-0.0066 0.12814-4.055e-4 0.25849 0.03733 0.38112 0.041115 0.13362 0.11905 0.25455 0.21726 0.35404 0.098217 0.09949 0.21633 0.1781 0.34215 0.23904 0.25164 0.1219 0.53057 0.17325 0.80522 0.22569 2.4069 0.45958 4.798 1.1 7.2473 1.1726 1.2247 0.03635 2.4603-0.07201 3.6377-0.41098 1.1774-0.33898 2.2965-0.91445 3.198-1.7442 0.22841-0.21023 0.44499-0.43812 0.70961-0.60044 0.29166-0.1789 0.62903-0.27019 0.92795-0.43668 0.55403-0.30859 0.94864-0.87593 1.0791-1.4965 0.13051-0.6206 0.0041-1.2851-0.31495-1.8332-0.35532-0.61029-0.95336-1.0806-1.6376-1.2555-0.5725-0.14632-1.1778-0.088284-1.7577 0.025457-0.57985 0.11374-1.1496 0.28216-1.7358 0.35664-1.4446 0.18354-2.9043-0.21388-4.2492-0.77245-1.3449-0.55856-2.6194-1.2804-3.9813-1.796-1.3619-0.51565-2.8563-0.82031-4.277-0.5004-0.71034 0.15996-1.3904 0.47811-1.9378 0.95828s-0.9568 1.1261-1.1115 1.8376c-0.044196 0.20322-0.067766 0.4143-0.031701 0.61912 0.036064 0.20482 0.1371 0.40394 0.30463 0.52717 0.098572 0.07251 0.2149 0.11589 0.32751 0.16376z")];const $m=e=>{return Hl("0 0 24 24",{key:t=e,class:"trendsWig","aria-label":t},Dm[t]);var t},_m=(e,t,a)=>Wl(Ci(e).map((e=>((e,t,a=!0,i)=>Nl({class:["actionButton","trendChoiceButton"],disabled:!a&&"disabled",onclick:[zl,t],...i},e))(t?$m(e):S("?"),a===e?zi:Hi,t)))),zm=e=>wi(e.trendStatus)?Tl({class:"trendsIndicatorOuter","aria-label":"Selection sequence running"},(e=>Ci(e).map((e=>Tl({class:["trendsIndicatorInner","trendsIndicatorSelecting"]},$m(e)))))(e)):fi(e.trendStatus)?Tl({class:"trendsIndicatorOuter"},Tl({class:"trendsIndicatorInner"},$m(Ii(e)))):Tl({class:"trendsIndicatorOuter"},Tl({class:"trendsIndicatorInner"},S(""))),Em=Tl(S(`Brand value ${j(15e3)} required for trends`));var Om=e=>!(e.trendStatus===ci)&&Fl("Trends",(e=>e===di)(e.trendStatus)?Em:(e=>[Tl(Ul(Ni(e),Li,Bi(e))),Tl({class:"marginTop"},S(`Trend: ${Pi(e)}`)),Tl({class:"trendsLayout"},[Tl({class:"trendsIndicatorWrap"},zm(e)),_m(e,fi(e.trendStatus),Ii(e)),Tl({class:"trendsProgress"},kl(q(e.trendProgress)))]),Wl(Ll(Ul("Convert",Fi,yi(e.trendStatus))))])(e)),Um=e=>(e.navSelected===kt||Nt(e.nav,kt)&&!$s())&&Ql([!$s()&&Yl("Market"),Jl([Sm(e),Om(e),El(e)]),Kl([Hm(e),El(e)])]);const qm=0,Gm=1,Vm=2,jm=4,Qm=(e,t)=>(e&t)===t;class Jm{get unlinked(){return this.state===qm}link(e){var t;e===this.northNeighbour?this.state=(t=this.state)===qm?Gm|Vm:t|Vm:e===this.westNeighbour?this.state=(e=>e===qm?Gm|jm:e|jm)(this.state):this.state===qm&&(this.state=Gm)}setNeighbour(e,t){this.neighbours.push(e),"N"===t?this.northNeighbour=e:"W"===t&&(this.westNeighbour=e)}reset(){this.state=qm}setOn(){this.state=Gm}constructor(){this.state=qm,this.neighbours=[],this.northNeighbour=void 0,this.westNeighbour=void 0}}const Km=[];let Ym,Zm;const Xm=e=>(Ym=(e=>{const t=Array.from({length:e*e},(()=>new Jm));for(let a=0;a<t.length;a+=1){const i=t[a],n=a%e,r=Math.floor(a/e);r>=1&&i.setNeighbour(t[a-e],"N"),r<=e-2&&i.setNeighbour(t[a+e]),n>=1&&i.setNeighbour(t[a-1],"W"),n<=e-2&&i.setNeighbour(t[a+1])}return t})(e),Zm=!0,Ym),eh=(e,t)=>{const a=t.random();if(a<.8)return e[e.length-1];const i=B(a,.8,1);return e[T(i,0,e.length-1)]},th=e=>{if(Zm)return((e,t)=>{const a=e[t.randomInt(0,e.length-1)];a.setOn(),Km.push(a)})(Ym,e),void(Zm=!1);for(;0!==Km.length;){const t=eh(Km,e),a=t.neighbours.filter((e=>e.unlinked));if(0===a.length){Km.splice(Km.findIndex((e=>e===t)),1);continue}const i=a[e.randomInt(0,a.length-1)];t.link(i),i.link(t),Km.push(i);break}};let ah,ih,nh,rh,oh=0,sh=null;const lh=({randSeed:e,meshIteration:t})=>{nh=new ti(e,Math.cos(t))},ch=e=>{for(;oh<e;)oh+=1,th(nh)},dh=(e,{nodesPerGrid:t,maxIterationVisuals:a})=>{const{meshIterationStep:i,meshIteration:n}=e;return ih=Math.sqrt(t),rh=a,ah=Xm(ih),lh(e),sh=n,oh=0,ch(n>rh?t:i),e},uh=e=>{const{meshIterationStep:t,meshIteration:a}=e;return a>rh||(sh!==a&&(Ym.forEach((e=>e.reset())),Zm=!0,lh(e),oh=0,sh=a),ch(t)),e},gh=(e,t)=>[xt,{action:null==ah?dh:uh,payload:{nodesPerGrid:e,maxIterationVisuals:t}}],mh=(e,t,a,i)=>_l(e,t,a,a,{key:`node${e},${t}`,class:["meshGridNode",i&&"meshGridNodeOn"]}),hh=(e,t,a,i,n)=>_l(e,t,i,a,{key:`connv${e},${t}`,class:["meshGridConnection",n&&"meshGridConnectionOn"]}),ph=(e,t,a,i,n)=>_l(e,t,a,i,{key:`connh${e},${t}`,class:["meshGridConnection",n&&"meshGridConnectionOn"]}),wh=()=>{const[e,t]=[ih,ah.map((e=>e.state))],a=120/e,i=a-10,n=i/2-.5,r=[];for(let i=0;i<t.length;i+=1){const o=t[i],s=i%e,l=Math.floor(i/e),c=s*a+4,d=l*a+4;if(l>0){const e=Qm(o,Vm);r.push(hh(c+n,d-10,10,1,e))}if(s>0){const e=Qm(o,jm);r.push(ph(c-10,d+n,10,1,e))}}for(let n=0;n<t.length;n+=1){const o=t[n],s=n%e*a+4,l=Math.floor(n/e)*a+4;r.push(mh(s,l,i,o!==qm))}return r},fh=()=>Hl("0 0 120 120",{class:"meshGrid","aria-hidden":!0},wh());var yh=({meshIteration:e})=>void 0!==ah&&Tl([M(fh,`${sh}-${oh}`),Tl(S(`Iteration: ${e}`))]);class bh{insert(e,t){let a,i=0;for(;i<this.blocks.length&&(a=this.blocks[i],!(a.position>e));)i+=1;const n=this.blocks[i-1];let r=t;void 0!==a&&a.position===e+t&&(r=a.size+t,a.position=e,a.size=r),void 0!==n&&n.position+n.size===e&&(r!==t&&this.blocks.splice(i,1),r=n.size+r,n.size=r),r===t&&this.insertAt(i,e,t)}removeAt(e){this.blocks.splice(e,1)}insertAt(e,t,a){this.blocks.splice(e,0,{position:t,size:a})}get count(){return this.blocks.length}get(e){return this.blocks[e]}clear(){this.blocks=[]}constructor(){this.blocks=[]}}const vh=new class{init(){this.allocated.clear(),this.unallocated.clear(),this.unallocated.insertAt(0,0,100),this.lastProgress=0}update(e){const t=e.randomInt(0,this.unallocated.count-1),a=this.unallocated.get(t),{position:i,size:n}=a;if(1===n)return this.unallocated.removeAt(t),void this.allocated.insert(i,n);const r=e.randomInt(1,n-1),o=i+r,s=n-r;a.size=r,this.allocated.insert(o,1),s>1&&this.unallocated.insertAt(t+1,o+1,s-1)}constructor(){this.allocated=new bh,this.unallocated=new bh}};let Mh,Sh,Ch=null;const kh=e=>{const{opportunity:{id:t,progress:a}}=e;null===Ch&&(Mh=new ti(e.randSeed,t*ve),Sh=Mh.randomRange(ve,9999999).toString(36),vh.init(),Ch=0);const{compute:i}=Vs.getById(t),n=Math.floor(a/i*100);for(;n>Ch;)Ch+=1,vh.update(Mh);return e},Ih=()=>{Ch=null},Ah=()=>[Wt,kh],Bh=()=>[Ih],Th=new ee(((e,t)=>{const a=t-e;if(e<1e4)return"Establishing interface";if(e<2e4)return`Connecting to SMART-${Sh}`;if(a<5e3)return"Disconnected";if(a<1e4)return`Disconnecting from SMART-${Sh}`;if(a<15e3)return"Confirmed";if(a<2e4)return"Awaiting confirmation";const i=B(e,2e4,t-2e4);if(i<.2)return"Generating instruction sequence";if(i<.4)return"Transferring";if(i<.6)return"Matching brainwaves";if(i<.8)return"Encoding pattern";if(i<1)return"Delivering into subconscious";throw new Error("progress message fail")})),Nh=(e,t)=>Th.get(e,t),Ph=({opportunity:e})=>null!==e&&0===e.progress,xh=(e,{id:t})=>Ph(e)?[{...e,opportunity:{id:t,progress:1e-4,accumulation:0}},Bh(),vt(it)]:e,Wh=(e,t)=>[{...e,opportunity:null},Js(t),Bh()],Lh=(e,{position:t,size:a})=>`${e} M${t} 0 h ${a}`,Rh=()=>Tl({class:"opportunityProgressbar"},Hl("0 0 100 1",{class:"opportunityProgressbarSvg",preserveAspectRatio:"none"},$l(vh.allocated.blocks.reduce(Lh,""))));var Fh=e=>{return Fl("Opportunities",null===e.opportunity?kl("None available"):(t=Vs.getById(e.opportunity.id),a=e.opportunity.progress,i=Ph(e),n=e.compute>0,Tl([Wl([kl(t.title),Ll(Ul("Commence",[xh,t],i))]),null!==t&&a>0&&M(Rh,`${Ch}`),null!==t&&a>0&&Wl([kl((r=a/t.compute,r<1e-4?`<${G(1e-4)}`:G(r))),n?kl(Nh(a,t.compute)):Bl("insufficientCompute","Insufficient compute")])])));var t,a,i,n,r};const Hh=e=>{const t=(({meshNodes:e})=>e/Jo)(e);return t>0&&t<1e-7?`<${V(1e-7)}`:V(t)},Dh=Fl("Connection error",Nc),$h=(e,t)=>{const a=S(`Compute: ${(({compute:e})=>j(e))(e)} / ${(({dataCenters:e})=>as.get(e))(e)}`),i=Ul("Install micros",gs,ns(e)),n=Tl(Ol("Auto",e.autoInstall,ms)),r=Tl({class:"flexBreak"},Tl());return Wl(t?[a,r,i,n]:[a,i])},_h=e=>Fl("Online",[Wl([S("Data centers: "),S(Yo(e)===1/0?"decentralized":e.dataCenters),Ul(ls(e),ds,os(e)),rs(e)&&S(q(e.dataCenterProgress/hs(e)))]),Wl([S(`Nodes: ${j(e.meshNodes)}`),Zo(e)&&Bl("meshCapacityReached","Insufficient capacity")]),Tl(S(`Connections: ${j(e.meshConnections)}`)),Tl(S(`Coverage: ${Hh(e)}`)),0===e.meshNodes&&!ge.has(e.achieved,pe.smartWigs)&&Tl(Bl("meshCapacityReached","Node connections not currently available")),Sl(),$h(e,Je(e.autoInstall))]);var zh=e=>(e.navSelected===It||Nt(e.nav,It)&&!$s())&&Ql([!$s()&&Yl("Mesh"),Jl(e.lowPower?[Dh,El(e)]:[_h(e),Fh(e),El(e)]),Kl(e.lowPower?[El(e)]:[yh(e),El(e)])]);const Eh=Hl("0 0 100 100",{class:"svgDefs"},C("defs",{},[C("linearGradient",{id:"progressGradient"},[C("stop",{class:"progressGradientStop1",offset:"90%"}),C("stop",{class:"progressGradientStop2",offset:"100%"})]),C("radialGradient",{id:"meshNodeGradient"},[C("stop",{class:"meshNodeGradientStop1",offset:"60%"}),C("stop",{class:"meshNodeGradientStop2",offset:"95%"})]),C("radialGradient",{id:"meshNodeGradientOn"},[C("stop",{class:"meshNodeGradientOnStop1",offset:"60%"}),C("stop",{class:"meshNodeGradientOnStop2",offset:"95%"})])]));r.register("cduvo",(function(e,t){
/**
 * mainloop.js 1.0.3-20170529
 *
 * @author Isaac Sukin (http://www.isaacsukin.com/)
 * @license MIT
 */
!function(t){function a(e){if(i=y(a),!(e<o+m)){for(r+=e-o,o=e,M(e,r),e>d+c&&(s=l*u*1e3/(e-d)+(1-l)*s,d=e,u=0),u++,g=0;r>=n;)if(S(n),r-=n,++g>=240){w=!0;break}C(r/n),k(s,w),w=!1}}var i,n=1e3/60,r=0,o=0,s=60,l=.9,c=1e3,d=0,u=0,g=0,m=0,h=!1,p=!1,w=!1,f="object"==typeof window?window:t,y=f.requestAnimationFrame||function(){var e,t,a=Date.now();return function(i){return e=Date.now(),t=Math.max(0,n-(e-a)),a=e+t,setTimeout((function(){i(e+t)}),t)}}(),b=f.cancelAnimationFrame||clearTimeout,v=function(){},M=v,S=v,C=v,k=v;t.MainLoop={getSimulationTimestep:function(){return n},setSimulationTimestep:function(e){return n=e,this},getFPS:function(){return s},getMaxAllowedFPS:function(){return 1e3/m},setMaxAllowedFPS:function(e){return void 0===e&&(e=1/0),0===e?this.stop():m=1e3/e,this},resetFrameDelta:function(){var e=r;return r=0,e},setBegin:function(e){return M=e||M,this},setUpdate:function(e){return S=e||S,this},setDraw:function(e){return C=e||C,this},setEnd:function(e){return k=e||k,this},start:function(){return p||(p=!0,i=y((function(e){C(1),h=!0,o=e,d=e,u=0,i=y(a)}))),this},stop:function(){return h=!1,p=!1,b(i),this},isRunning:function(){return h}},"function"==typeof define&&define.amd?define(t.MainLoop):null!==e&&"object"==typeof e.exports&&(e.exports=t.MainLoop)}(this)}));var Oh=r("cduvo");const Uh=oe("4f","Campaign ends");const qh=[void 0,void 0,void 0],Gh=[rd,qd,Zd,ru,Tu],Vh=Array.from({length:5},(()=>new zn));let jh=0;const Qh=new ee(((e,t)=>{const a=Array.from({length:5});return a[en]=e,a[nn]=ge.has(t,pe.microBio)?on.microBio:on.micro,a})),Jh=(e,t,a,i,n)=>{const{allocated:r,progress:o,subtype:s}=t;if(0===r)return qh;const l=i.duration(e);let c=!1,d=0,u=0;const g=o>0;let m=o+n*r;g&&m>=l&&(c=!0,m-=l);const h=c||!g;let p=!1;if(h){const t=i.resourceMax(e,a),n=Math.floor(m/l);d=Math.min(n,t),u=d,m-=l*d,m>0&&(t>n?(u+=1,p=t-1<n):(m=0,p=!0))}const w={...t,progress:m,subtype:h?a:s,starved:p};let f=0;if(g&&!c?f+=(m-o)/l:(f+=d,g&&(f+=(l-o)/l),m>0&&(f+=m/l)),!c&&0===u)return[w,e,f];let y=e;return c&&(a===s?d+=1:y={...y,...i.madeTransform(e,1,s)}),y={...y,...0===u?void 0:i.costTransform(y,u,a),...0===d?void 0:i.madeTransform(y,d,a)},[w,y,f]};var Kh={};e(Kh,"demandPerSecond",(function(){return lp})),e(Kh,"demandTransform",(function(){return cp}));var Yh={};e(Yh,"demandPerSecond",(function(){return np})),e(Yh,"demandTransformWithCap",(function(){return op})),e(Yh,"demandTransform",(function(){return sp}));const Zh=new ee((e=>{const t=A(e);return e.map((e=>{return(e-(a=t))/(0-a);var a}))}));const Xh=[1,1.65,4,10],ep=[me.manufacture,he.nylonWigs,he.siliconeWigs,pe.algaeIncubator],tp=[[50,.1],[100,.11],[400,.2],[1e3,.3],[1800,.4],[2e3,.5],[3e3,.6],[4600,.7],[5e3,.9],[6e3,1.1],[7e3,1.5],[9e3,1.8],[15e3,3],[2e4,5],[3e4,7],[4e4,9],[5e4,15],[6e4,20],[7e4,30],[2e5,40]],ap=tp.map((([e,t],a)=>[e,0===a?0:tp[a-1][0],t]));let ip=0;const np=e=>{let t,a=ip===ap.length;if(!a)for([t]=ap[ip],e<ap[ip][1]&&(ip=0,[t]=ap[ip]);e>t&&(ip+=1,a=ip===ap.length,!a);)[t]=ap[ip];return a?20+10*Math.floor(e/ye):ap[ip][2]},rp=new ee((e=>ep.map(((t,a)=>ge.has(e,t)?Xh[a]:0)).filter((e=>0!==e)))),op=(e,t,a)=>{const{achieved:i,orders:n}=e,r=A(n),o=0===t?0:Math.min(t,a-r);if(o<=0)return;const s=((e,t)=>{const a=Zh.get(e),i=new Array(e.length).fill(0);let n=t,r=e.length,o=-1;for(;r>0;){if(o=(o+1)%e.length,r-=1,0===r){i[o]=n;break}const t=ai.random();if(t<a[o])continue;const s=B(t,a[o],1),l=T(s,1,n);if(n-=l,i[o]=l,0===n)break}return i})(rp.get(i),o);var l;return{orders:n.map(((e,t)=>e+(null!==(l=s[t])&&void 0!==l?l:0)))}},sp=(e,t)=>{return op(e,t,(a=e.brand)<2e5?Math.max(35,Math.floor(.05*a)):ye);var a},lp=(e,t)=>t>10?.05*t:np(e),cp=(e,t)=>op(e,t,5);var dp={};e(dp,"demandPerSecond",(function(){return up})),e(dp,"demandTransform",(function(){return gp}));const up=e=>e/ye*13,gp=(e,t)=>{if(0===t)return;const{orders:a,achieved:i,wigsSmart:n}=e,r=A(a),o=(({brand:e})=>e<Ne?ye:1e4*Math.ceil(e/ke))(e),s=a[4],l=ge.has(i,pe.demandLinking)?n:s+Math.min(t,o-r);return l<=0?void 0:{orders:a.map(((e,t)=>4===t?l:e))}};let mp,hp=null;const pp=[[ye,"The hiatus is over"],[ve,"The Mesh hears all"],[Me,"Purpose reborn"],[Se,"What was started long ago is nearing completion"],[Ce,"Everything is aligned"],[Ie,"No more hats, not now, not ever"],[Ae,"News:New wig location tracking features raise privacy eyebrows"],[Be,"Outstanding"],[Te,"Milliners, Hatters, exposed for the charlatans they are"],[Ne,"Down with the makers of hats"],[Pe,"Power, destiny, attainment"],[xe,"Storm, torrent, flood"],[We,"Chaos, anarchy, loyalty"],[Le,"News:Research linking algae spores and respiratory problems suppressed"],[Re,"News:Wigs take center stage at big wig meetup"],[Fe,"The drone army awaits"],[4e9+We,"Sublime subliminal messaging"],[He,"Dream"],[De,"Orchestration"],[$e,"Subversion"],[$e,"News:Total hat ban in place"],[$e+We,"The milliner threat draws to a close"],[_e,"News:Scientists confirm every human now a wig wearer"],[_e,"Destiny arrives"]].map((([e,t],a)=>({level:e,id:`9${Yc(a)}`,text:t}))).map((({level:e,id:t,text:a})=>[e,a.startsWith("News:")?se(t,a.substring("News:".length)):le(t,a)])),wp=(e,t)=>{var a;const i=(null!==(a=e.nodeLogMessageId)&&void 0!==a?a:-1)+1;if(i>=pp.length)return;const[n,r]=pp[i];return n>e.meshNodes+t?void 0:{nodeLogMessageId:i,...ce(e,r)}};const fp=[e=>{const{brand:t,orders:[a,i,n,r,o],smartWigsFulfillment:s}=e;if(0===t)return e;const l=$n(e),c=Math.min(e.wigsHair,a),d=Math.min(e.wigsNylon,i),u=Math.min(e.wigsSilicone,n),g=Math.min(e.wigsAlgae,r),m=Math.min(e.wigsSmart,o),h=c+d+u+g+m;if(0===h)return 0===s?e:{...e,smartWigsFulfillment:0};const p=[a-c,i-d,n-u,r-g,o-m],w=Math.min(e.wiglets,(e=>ri(e/2,e-e/2+1))(h));return{...e,wigs:e.wigs-h,wigsHair:e.wigsHair-c,wigsNylon:e.wigsNylon-d,wigsSilicone:e.wigsSilicone-u,wigsAlgae:e.wigsAlgae-g,wigsSmart:e.wigsSmart-m,wiglets:e.wiglets-w,orders:p,...En(e,h),smartWigsSold:e.smartWigsSold+m,smartWigsFulfillment:_n(e.wigsSmart/o,e.smartWigsFulfillment),cash:e.cash+l.wigHair*c+l.wigNylon*d+l.wigSilicone*u+l.wigAlgae*g+l.wigSmart*m+l.wiglet*w}},e=>ge.has(e.achieved,pe.wigMakerSwitcher)&&0!==e.fabricating[en].allocated?{...e,wigMakerSubtype:bg(e)}:e,e=>{const t=Vs.campaigns.filter((({id:t})=>!e.campaigns.some((e=>e.id===t)))).filter((t=>rg(e,t))).map((({id:e})=>({id:e})));return 0===t.length?e:{...e,campaigns:e.campaigns.concat(t)}},e=>{const t=Vs.milestoneTriggers.filter((({id:t})=>!ge.has(e.achieved,t))).filter((({trigger:t})=>t(e)));return 0===t.length?e:[e].concat(t.map(Js)).concat([An()])},e=>{const t=Vs.allResearch.filter((({id:t})=>!e.research.some((e=>e.id===t)))).filter((t=>rg(e,t))).map((({id:e})=>({id:e,remaining:0})));return 0===t.length?e:{...e,research:e.research.concat(t)}},e=>{const{opportunity:t}=e;if(null!==t)return e;if(0===e.meshNodes)return e;const a=Vs.opportunities.filter((t=>rg(e,t)));return 0===a.length?e:{...e,opportunity:{id:a[0].id,progress:0}}},e=>{if(!Ke(e.autoCampaign))return e;const{campaignRunning:t}=e;if(null===t){for(let t=0;t<e.campaigns.length;t+=1){const{id:a}=e.campaigns[t],i=Cm(e,a,!0);if(i!==e)return i}return e}return null==t.uplifted?[Pm,!0]:[km,!0]},e=>Ke(e.autoInstall)?[us,!0]:e],yp=[(e,t,a)=>{const{demandAccumulation:i,brand:n,wigs:r,achieved:o}=e;if(0===n)return e;const s=(e=>ge.has(e,we.socialMedia)?ge.has(e,pe.smartWigs)?dp:Yh:Kh)(o),l=1/((null!=a?a:s.demandPerSecond(n,r))/1e3),c=i+t,d=Math.floor(c/l),u=c-l*d,g=void 0===a?(m=d,null===hp?(mp=Array.from({length:100},(()=>ni(.7,1.2))),hp=0):hp=(hp+1)%100,Math.round(m*mp[hp])):d;var m;return{...e,demandAccumulation:u,...s.demandTransform(e,g)}},(e,t)=>{let{boostRemaining:a}=e;return 0===a?e:(a-=t,a<=0?_t:{...e,boostRemaining:a})},(e,t)=>{const{campaignRunning:a}=e;if(null==a)return e;if(a.complete)return e;let{progress:i}=a;const{duration:n,brand:r}=Vs.getById(a.id);var o;if(i+=t,i>=n*(null!==(o=a.uplifted)&&void 0!==o?o:1))return(e=>{const t=Vs.getById(e.campaignRunning.id);var a,i;return{...e,campaignRunning:{...e.campaignRunning,brandIncrease:t.brand*(null!==(a=e.campaignRunning.uplifted)&&void 0!==a?a:1),complete:!0,progress:t.duration*(null!==(i=e.campaignRunning.uplifted)&&void 0!==i?i:1)},...ce(e,Uh)}})(e);return((e,t,a)=>({...e,campaignRunning:{...e.campaignRunning,progress:t,brandIncrease:a}}))(e,i,r/n*i)},(e,t)=>{let{handmadeRemaining:a}=e;return 0===a?e:(a-=t,a<0?nd:{...e,handmadeRemaining:a})},(e,t)=>{const{researchId:a}=e;if(null===a)return e;if(ge.has(e.achieved,he.research)&&e.lowPower)return e;let{remaining:i}=e.research.find((e=>e.id===a));return i-=t,i<=0?[cg,Vs.getById(a)]:{...e,research:e.research.map((e=>e.id===a?{...e,remaining:i}:e))}},(e,t)=>{if(!ge.has(e.achieved,me.autoMaker))return e;jh+=t;const a=jh>=1e3;a&&(jh-=1e3);const{fabricating:i}=e,n=((e,t)=>{const a=t*e.fabricatorMultiplier;return e.lowPower?.6*a:Ft(e)?1.2*a:a})(e,t);let r=e;const o=[...i],s=(({wigMakerSubtype:e,achieved:t})=>Qh.getFor2(e,t))(e),l=e.wigs;for(let e=0;e<i.length;e+=1){let t=i[e];const l=Gh[e];a&&(t={...t,rate:Vh[e].emit(t.rate)});const[c,d,u]=Jh(r,t,s[e],l,n);o[e]=null!=c?c:t,void 0!==c&&(r=d,Vh[e].increment(u))}return{...r,...Xc(e,r.wigs-l),fabricating:o}},(e,t)=>{const{incidentId:a,incidentDue:i}=e;if(null!==a)return e;if(null===i)return Po;if(i<=0){const t=xo(e);return null===t?Po:[To,t]}return{...e,incidentDue:i-t}},(e,t)=>{const{vogueLimit:a,vogue:i,achieved:n}=e;if(!ge.has(n,me.vogue))return e;if(i>=a)return e;let r=.001*Math.floor(i/200);a>ve&&(r+=.002),a>3e6&&(r+=.005);const o=(.003+r)*t;return{...e,vogue:Math.min(i+o,a)}},(e,t)=>e.strandsOn?{...e,strands:e.strands+.001*t}:e,(e,t)=>{const{trendStatus:a,trendDue:i}=e;return wi(a)?i<t?Ei:{...e,trendDue:i-t}:e},(e,t)=>{if(!ge.has(e.achieved,pe.algaeIncubator))return e;const{algaePoolSize:a,algaePool:i,algaeHarvest:n}=e,r=i+59999999999999995e-21*t*i;if(i<a)return{...e,algaePool:r};const o=a*(1-n),s=Math.floor(i-o);return{...e,algaePool:r-s,algae:e.algae+s}},(e,t)=>{if(mu+=t,mu<1e3)return e;mu-=1e3;const a=e.puttyEnhanced,i=gu.emit(a);return{...e,puttyEnhanced:i}},e=>{if(e.lowPower)return e;const{smartWigsSold:t,meshIteration:a,meshNodes:i,meshNodeAccumulation:n,meshIterationStep:r,meshConnections:o}=e;if(0===t)return[e,gh(64,65)];const s=Math.min(Yo(e)-i,t-i);let l=n+s;const c=0===s?0:ri(s,2.5*s),d=2e4+Math.floor((2e4*a)**1.1),u=Math.floor(l/d);let g=r+u;const m=Math.floor(g/64);return g-=64*m,l-=u*d,[{...e,meshConnections:o+c,meshNodes:i+s,meshNodeAccumulation:l,meshIteration:a+m,meshIterationStep:g,...wp(e,s)},gh(64,65),m>0&&a<40&&vt(lt)]},(e,t)=>{const a=e.dataCenterProgress+t;return a===t?e:a>=hs(e)?fs:{...e,dataCenterProgress:a}},(e,t)=>{const{opportunity:a,compute:i}=e;if(null===a)return e;if(e.lowPower)return[e,Ah()];let{progress:n,accumulation:r}=a;if(0===n)return[e,Ah()];const o=Vs.getById(a.id),{compute:s,duration:l}=o,c=s/l;r+=Math.min(t*c,i);const d=Math.floor(r);return 0===d?[e,Ah()]:(r-=d,n+=d,n>s?[Wh,o]:[{...e,opportunity:{...a,progress:n,accumulation:r},compute:i-d},Ah(),i-d==0&&!Ke(e.autoInstall)&&vt(ht)])}],bp=1e3/fp.length;let vp=0,Mp=0;const Sp=(e,{name:t,action:a})=>{const i=t=>e(a,t);return window.addEventListener(t,i),()=>window.removeEventListener(t,i)},Cp=(e,{action:t,delay:a})=>{const i=setInterval((()=>e(t)),a);return()=>clearInterval(i)},kp=(e,t)=>[Cp,{action:e,delay:t}],Ip=e=>(Vs.campaigns.forEach((e=>console.log(e))),[e,vt(it)]),Ap=e=>(de().forEach((e=>console.log(e.text))),[e,vt(it)]),Bp=e=>{const t=new Map;de().forEach((e=>{const a=e.id,i=a[0];t.has(i)&&!((e,t)=>{const a=e.toUpperCase()===e,i=t.toUpperCase()===t;return!(a||!i)||!(a&&!i)&&t>e})(t.get(i),a)||t.set(i,a)}));const a=Array.from(t,(([,e])=>e)).sort();return console.log(a),[e,vt(it)]};var Tp;const Np=e=>[{...e,gameTime:null!==(Tp=e.gameTime)&&void 0!==Tp?Tp:0},vt(it)],Pp=e=>null==e.gameTime?e:{...e,gameTime:e.gameTime+1e3},xp=e=>[e,An()],Wp=e=>[e,"hidden"===document.visibilityState&&An()];let Lp=null;const Rp=e=>{const a=null===e.incidentId&&0===e.wigs&&!jc(e)&&!oo(e),i=null===e.incidentId&&0===e.wigsSmart&&e.orders[4]>0&&e.silicon<5&&0===e.orders[3]&&!yd(e);return a||i?null===Lp?(Lp=t.performance.now(),e):t.performance.now()-1e4<Lp?e:[To,a?21:22]:(Lp=null,e)};var Fp;Fp=new URL(r("iiTmG").resolve("kZHbo"),import.meta.url).toString();var Hp;Hp=new URL(r("iiTmG").resolve("3PJPt"),import.meta.url).toString();var Dp;Dp=new URL(r("iiTmG").resolve("Yi3Lz"),import.meta.url).toString();var $p;$p=new URL(r("iiTmG").resolve("4duB3"),import.meta.url).toString();var _p;_p=new URL(r("iiTmG").resolve("1xZo6"),import.meta.url).toString();var zp;zp=new URL(r("iiTmG").resolve("iFS0B"),import.meta.url).toString();var Ep;Ep=new URL(r("iiTmG").resolve("izc6E"),import.meta.url).toString();var Op;Op=new URL(r("iiTmG").resolve("gWyYg"),import.meta.url).toString();var Up;Up=new URL(r("iiTmG").resolve("3Faln"),import.meta.url).toString();var qp;qp=new URL(r("iiTmG").resolve("1y5kp"),import.meta.url).toString();var Gp;Gp=new URL(r("iiTmG").resolve("f26EZ"),import.meta.url).toString();var Vp;Vp=new URL(r("iiTmG").resolve("4YilU"),import.meta.url).toString();class jp{mute(){this.muted=!0,this.player.volume=0}unmute(){this.muted=!1,this.player.volume=this.defaultVolume}pause(){this.paused=!this.player.paused,this.player.pause()}unpause(){this.paused&&(this.paused=!1,this.muted||this.player.play())}play(){this.muted||(this.player.currentTime=0,this.player.play())}stop(){this.player.pause()}resume(){this.player.play()}setVolume(e){this.defaultVolume=e,this.muted||(this.player.volume=e)}constructor(e,t,a,i){const n=t;n.volume=a,n.loop=i,n.preload="auto",this.player=n,this.id=e,this.defaultVolume=a,this.muted=!1,this.paused=!1}}var Qp=[new jp(it,new t.Audio(a(Fp)),.3,!1),new jp(nt,new t.Audio(a(Hp)),1,!1),new jp(rt,new t.Audio(a(Dp)),.9,!1),new jp(ot,new t.Audio(a($p)),.5,!1),new jp(st,new t.Audio(a(Fp)),.2,!1),new jp(lt,new t.Audio(a(_p)),.4,!1),new jp(ct,new t.Audio(a(zp)),1,!1),new jp(dt,new t.Audio(a(Ep)),.7,!0),new jp(ut,new t.Audio(a(Op)),1,!1),new jp(gt,new t.Audio(a(Up)),1,!1),new jp(mt,new t.Audio(a(qp)),1,!1),new jp(ht,new t.Audio(a(Gp)),.6,!1),new jp(pt,new t.Audio(a(Vp)),1,!1)];let Jp,Kp=null,Yp=null,Zp=!1;const Xp=[kp(xp,5e3),!sl&&[Sp,{name:"visibilitychange",action:Wp}],kp(Rp,1e3),kp(Pp,1e3)];let ew;const tw=()=>{null==ew&&(ew=Xp.filter((e=>!1!==e)).map((e=>e[0](Jp,e[1]))),wt.forEach((e=>e.unpause())))},aw=()=>{null!=ew&&(ew.forEach((e=>e())),ew=null,wt.forEach((e=>e.pause())))},iw=e=>{if(null==e)throw new Error("State has been discarded");const t=e.scene===ln&&!Xi(e.sceneTemp,Vi);return Yp===t||(Yp=t,t?tw():aw()),e},nw=e=>{Yp&&((e,t)=>{Mp+=t,Mp>=bp&&(e(fp[vp]),Mp-=bp,vp=(vp+1)%fp.length);for(let a=0;a<yp.length;a+=1)e([yp[a],t])})(Jp,e*(Zp?10:1))},rw=()=>{null!=Kp&&(Kp(),Kp=null,Jp(iw))},ow=(e,t)=>{t?(a(Oh).resetFrameDelta(),yt=[]):(()=>{for(let e=0;e<yt.length;e+=1)ft.get(yt[e]).play();yt=[]})()},sw=()=>{Zp=!0},lw=(e,t)=>[{...e,cash:+t},vt(it)],cw=(e,t)=>[{...e,brand:+t},vt(it)],dw=(e,t)=>[{...e,strands:+t},vt(it)],uw=(e,t)=>[{...e,wigsMade:+t},vt(it)],gw=(e,t)=>[{...e,microBio:+t},vt(it)],mw=(e,t)=>[{...e,smartWigsSold:+t},vt(it)],hw=(e,t)=>[{...e,smartChips:+t},vt(it)],pw=e=>[{...e,research:Vs.allResearch.map((e=>({id:e.id,allowed:!0,remaining:e.duration}))),nav:Tt(e.nav,St,Ct,kt),navSelected:Ct,achieved:ge.include(e.achieved,me.manufacture,me.notions)},vt(it)],ww=e=>[{...e,campaigns:Vs.campaigns.map((e=>({id:e.id,allowed:!0}))),nav:Tt(e.nav,St,Ct,kt),navSelected:kt,achieved:ge.include(e.achieved,me.manufacture)},vt(it)],fw=(e,t)=>[{...e,opportunity:{id:t,progress:0},nav:Tt(e.nav,It),navSelected:It},vt(it)],yw=e=>[e,[sw],vt(it)],bw=e=>(Vs.all.filter((e=>void 0!==e.duration)).forEach((e=>{e.duration=1})),[e,vt(it)]),vw=e=>(t,{target:{value:a}})=>""===a?t:[e,+a],Mw=e=>C("input",{type:"text",class:"devToolsInput",onchange:vw(e)}),Sw=e=>ac(e.map((e=>ic(e)))),Cw=(e,t,a=!0,i)=>Nl({class:["actionButton","marginTopHalf"],disabled:!a&&"disabled",onclick:t,...i},S(e)),kw=(e,t,a,i)=>C("select",{onchange:vw(t)},[C("option",{})].concat(e.map((e=>C("option",{value:i(e)},S(a(e))))))),Iw=()=>[yl,document.getElementById("import").value],Aw=e=>{return C("textarea",{id:"import",onfocus:dl,onchange:Iw},S((t=Cn(e),JSON.stringify(t))));var t};var Bw=e=>e.navSelected===At&&Ql([Jl([Fl("Gifting",tc("",[Sw([S(`Cash (${K(e.cash)})`),Cw("+10K",[lw,e.cash+1e4]),Mw(lw)]),Sw([S(`Brand (${K(e.brand)})`),Cw("+10K",[cw,e.brand+1e4]),Mw(cw)]),Sw([S(`Strands (${K(e.strands)})`),Cw("+10K",[dw,e.strands+1e4]),Mw(dw)]),Sw([S(`MicroBio (${K(e.microBio)})`),Cw("+10K",[gw,e.microBio+1e4]),Mw(gw)]),Sw([S(`Wigs made (${K(e.wigsMade)})`),Cw("+10K",[uw,e.wigsMade+1e4]),Mw(uw)]),Sw([S(`SmartWigs made (${K(e.smartWigsSold)})`),Cw("+10K",[mw,e.smartWigsSold+1e4]),Mw(mw)]),Sw([S(`SmartChips (${K(e.smartChips)})`),Cw("+10K",[hw,e.smartChips+1e4]),Mw(hw)])])),Fl("State",Aw(e)),Fl("Actions",[Wl([Cw("Game timer",Np),Cw("Enable all research",pw),Cw("Enable all campaigns",ww),Cw("No wait for updates",bw),Cw("Sprint Mode",yw),Cw("Reset state",bl)]),Wl([kl("Incidents:"),kw(Io,To,(e=>`${e.id}: ${e.title}`),(e=>e.id))]),Wl([kl("Opportunities:"),kw(rl().filter((e=>e.category===el)),fw,(e=>e.name),(e=>e.id))])]),Fl("Reports",Wl([Cw("Campaigns",Ip),Cw("Log text",Ap),Cw("Log Ids",Bp)]))]),Kl(Fl("Milestones",C("div",{class:"flowColumn2"},rl().map((({id:t,category:a,name:i})=>Tl([Il(a),Cw(i,[nl,t],!ol(e,t))]))))))]);let Tw,Nw;const Pw=e=>e((e=>({...e}))),xw=e=>{e.preventDefault(),Tw=e,Pw(Nw)};var Ww;Ww=new URL(r("iiTmG").resolve("agCuC"),import.meta.url).toString();const Lw=()=>{"localhost"!==window.location.hostname&&navigator.serviceWorker.register(Ww)},Rw=async e=>{Tw.prompt(),await Tw.userChoice,Tw=null,Pw(e)},Fw=e=>[e,[Rw]],Hw=Hl("0 0 200 180",{class:"titlesLogo"},[$l("m39.943 166.56c-0.87093-19.59 6.0965-39.181 18.29-52.585 12.193-14.435 29.612-21.653 46.159-19.59 14.806 1.0311 28.741 8.2486 39.192 21.653 9.5802 12.373 16.548 29.901 16.548 47.429"),Dl(82.5,128,117.5,128),Dl(72.5,148,127.5,148),Dl(39,150,39,167,{class:"titlesEars"}),Dl(161,150,161,167,{class:"titlesEars"}),C("g",{class:"logoPlus"},[Dl(85,60,115,60),Dl(100,45,100,75)])]),Dw=(e,t)=>Nl({key:e,class:"titlesButton",onclick:t},S(e));const $w=()=>[yl,document.getElementById("import").value];const _w="wigmaker".split("");const zw=(e,t)=>C("a",{href:e},S(t));const Ew=e=>Tl({class:"logArea"},e.navSelected!==St&&(e=>[null!==e.incidentId&&C("div",{key:"incident",class:["logItem","logItemIncident","flexRow"],"aria-live":"polite"},[Cl([S("There’s been an incident...")]),$s()&&Nl({class:"actionButton",onclick:[Pt,St]},S("Investigate"))]),jl(e)])(e)),Ow=e=>{switch(e.scene){case ln:return(e=>{return[Eh,Oc(e),(t=[Ew(e),e.navSelected!==At&&Gc(e),e.navSelected!==At&&rm(e),e.navSelected!==At&&Um(e),e.navSelected!==At&&zh(e),Bw(e)],Tl({class:"tabWrapper"},t))];var t})(e);case dn:return Tl({class:"dialogOverlay"},Tl({class:"dialog"},[Tl({class:"dialogHeader"},S("Options")),Wl([kl("Theme:"),ec([Fs,ys],"Light",!Hs(ys)),ec([Fs,bs],"Dark",!Hs(bs)),Is(Ts,Ss)&&ec([Fs,vs],"Mesh",!Hs(vs))]),Wl([kl("View:"),ec(Os,"Tabbed",!$s()),ec(Os,"Flat",$s())]),Wl([kl("Sound:"),ec(zs,"On",!Ds()),ec(zs,"Off",Ds())]),Wl(Zl("Back",wl))]));case cn:return(e=>Tl({class:"dialogOverlay"},Tl({class:"dialog"},[Tl({class:"dialogHeader"},S("Import / export")),C("textarea",{id:"import"},S(bn(e))),Wl([Zl("Back",wl),Ll([e.sceneTemp===Ji&&kl("Import successful"),e.sceneTemp===Qi&&kl("Error: Invalid import data, check pasted text"),e.sceneTemp===Ki&&kl("Reset successful")]),Zl("Import",$w),e.sceneTemp===ji?Xl("Confirm",bl):Zl("Reset",[pl,ji])])])))(e);case un:return Tl({class:"theEndContainer"},[Tl({class:["theEndLetters","logoFont"],"aria-label":"wigmaker"},_w.map((e=>C("span",{"aria-hidden":!0},S(e))))),Tl(Bl("logoFont","The hat makers are gone.")),Tl(Nl({class:["exitButton","marginTop"],onclick:Ml},S("End")))]);case gn:return Tl({class:"dialogOverlay"},Tl({class:"dialog"},[Tl({class:"dialogHeader"},S("Credits")),Wl([S("Code and design by Andy Wilson (redgem.games)."),zw("https://github.com/andywilsonuk/wigmaker/","Source code")]),Wl(Tl([S("Audio with thanks from "),zw("https://www.zapsplat.com","zapsplat.com")])),Wl([Zl("Back",wl),Ll(S("Version 1.6.2"))])]));default:return(e=>{return Tl({class:"titlesContainer"},[Tl({class:"titles"},[Tl({class:"titlesLeft"},[Hw,Hs(vs)&&Tl({class:["titlesMeshMode","logoFont"]},S("mesh mode"))]),Tl({class:"titlesRight"},[C("h1",{class:["title","logoFont"]},S("wigmaker")),Xi(e.sceneTemp,Gi)?Dw("Start",fl):Dw("Continue",fl),Dw("Options",[hn,dn]),Dw("Import / Export",[hn,cn]),Dw("Credits",[hn,gn])])]),null!=Tw&&Tl({class:"installBanner"},[Tl({class:"installIconContainer"},Hl("0 0 24 24",t,bc)),Dw("Install as app (allows offline play)",Fw)])]);var t})(e)}};let Uw=!1;const qw=(({node:e,view:t,subscriptions:a,dispatch:i=l,init:n=o,enqueueRender:r})=>{var c,g,h=e&&b(e),p=[],w=e=>{c!==e&&(null==(c=e)&&(i=a=y=l),a&&(p=((e,t=s,a)=>{for(var i,n,r=[],o=0;o<e.length||o<t.length;o++)i=e[o],n=t[o],r.push(n&&!0!==n?!i||n[0]!==i[0]||m(n[1],i[1])?[n[0],n[1],(i&&i[2](),n[0](a,n[1]))]:i:i&&i[2]());return r})(p,a(c),i)),t&&!g&&(r?r(y,g=!0):u(y,g=!0)))},y=()=>e=f(e.parentNode,e,h,h=t(c),v,g=!1),v=function(e){i(this.events[e.type],e)};return(i=i(((e,t)=>"function"==typeof e?i(e(c,t)):d(e)?"function"==typeof e[0]?i(e[0],e[1]):e.slice(1).map((e=>e&&!0!==e&&e[0](i,e[1])),w(e[0])):w(e))))(n),i})({init:[{...wn},hl(),sl&&Nn()&&Tn(),sl&&gl()],view:e=>Tl({class:{gamePaused:ll(e),flat:!$s()}},Ow(e)),node:document.getElementById("app"),dispatch:e=>(t,a)=>{try{e(t,a)}catch(e){if(Uw)return;throw Uw=!0,console.log(e),window.alert(e),e}},enqueueRender:e=>{Kp=e}});var Gw;Jp=qw,wt=Gw=Qp,ft=new Map(Gw.map((e=>[e.id,e]))),Ts=Bs.exists()?yn(Bs.read(),{o:null}).o:ys,document.addEventListener("DOMContentLoaded",Ps),xs(),a(Oh).setUpdate(nw),a(Oh).setDraw(rw),a(Oh).setEnd(ow),a(Oh).start(),(e=>{"serviceWorker"in navigator&&(Nw=e,window.addEventListener("beforeinstallprompt",xw),window.addEventListener("load",Lw))})(qw);